(function(t){function e(e){for(var a,o,i=e[0],c=e[1],l=e[2],d=0,p=[];d<i.length;d++)o=i[d],n[o]&&p.push(n[o][0]),n[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(p.length)p.shift()();return r.push.apply(r,l||[]),s()}function s(){for(var t,e=0;e<r.length;e++){for(var s=r[e],a=!0,i=1;i<s.length;i++){var c=s[i];0!==n[c]&&(a=!1)}a&&(r.splice(e--,1),t=o(o.s=s[0]))}return t}var a={},n={app:0},r=[];function o(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=a,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(s,a,function(e){return t[e]}.bind(null,a));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var u=c;r.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"143e":function(t,e,s){},"1cf3":function(t,e,s){"use strict";var a=s("35cd"),n=s.n(a);n.a},"23a4":function(t,e,s){},"2aab":function(t,e,s){"use strict";var a=s("a176"),n=s.n(a);n.a},"2dd7":function(t,e,s){},"35a5":function(t,e,s){"use strict";var a=s("c9bd"),n=s.n(a);n.a},"35cd":function(t,e,s){},"3ae8":function(t,e,s){"use strict";var a=s("e773"),n=s.n(a);n.a},"3e3b":function(t,e,s){"use strict";var a=s("fcec"),n=s.n(a);n.a},4678:function(t,e,s){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function n(t){var e=r(t);return s(e)}function r(t){var e=a[t];if(!(e+1)){var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}return e}n.keys=function(){return Object.keys(a)},n.resolve=r,t.exports=n,n.id="4678"},5592:function(t,e,s){"use strict";var a=s("d91a"),n=s.n(a);n.a},5681:function(t,e,s){"use strict";var a=s("a5f9"),n=s.n(a);n.a},"56d7":function(t,e,s){"use strict";s.r(e);var a=s("2b0e"),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("c-navbar",[[s("router-link",{staticClass:"link title text-light colour-on-hover colour-on-focus",attrs:{to:"/"}},[t._v("Home")])],s("template",{slot:"active"},[s("router-link",{staticClass:"link title text-light colour-on-hover colour-on-focus",attrs:{to:"/logout"}},[t._v("Logout")]),s("router-link",{staticClass:"link title text-light colour-on-hover colour-on-focus",attrs:{to:"/account"}},[t._v("Account")]),s("router-link",{staticClass:"link title text-light user colour-on-hover colour-on-focus",attrs:{to:"/admin/request"}},[t._v("\n\t\t\t\t\tAdminRequest\n\t\t\t")]),s("router-link",{staticClass:"link title text-light admin colour-on-hover colour-on-focus",attrs:{to:"/admin"}},[t._v("\n\t\t\t\t\tAdminBoard\n\t\t\t\t")])],1),s("template",{slot:"none-active"},[s("router-link",{staticClass:"link title text-light colour-on-hover colour-on-focus",attrs:{to:"/login"}},[t._v("Login")])],1)],2),s("router-view"),s("c-footer")],1)},r=[],o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("nav",{attrs:{id:"navbar"}},[s("div",{staticClass:"toggle hover-scale",class:t.is_open?"cross":"bars",attrs:{tabindex:"1"},on:{click:t.on_click}},[s("span",{staticClass:"span-1"}),s("span",{staticClass:"span-2"}),s("span",{staticClass:"span-3"})]),s("div",{staticClass:"bar-fill"}),s("div",{staticClass:"content",class:{"is-active":t.is_open,"is-admin":t.is_admin,"is-user":t.is_user},on:{click:t.on_click}},[t._t("default"),t.is_active?t._t("active",[t._v("\n\t\t\t\t\n\t\t\t\t"+t._s(t.user)+"\n\n\t\t\t")]):t._t("none-active",[t._v("\n\t\t\t\t\n\t\t\t\tnone active\n\t\t\t\t\n\t\t\t")])],2)])},i=[],c={name:"Navbar",data(){return{is_open:!1}},computed:{is_active:function(){return this.$store.getters["user/get_active"]},user:function(){return this.$store.getters["user/get_user"]},is_user:function(){return"user"===this.user.role},is_admin:function(){return"admin"===this.user.role}},methods:{on_click:function(){this.is_open=!this.is_open}},components:{}},l=c,u=(s("59c9"),s("ba83"),s("2877")),d=Object(u["a"])(l,o,i,!1,null,"4ff5dfec",null);d.options.__file="c_navbar.vue";var p=d.exports,m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"parent"},[s("footer",{ref:"footer"},[s("div",{staticClass:"dark footer"},[s("div",{staticClass:"center-auto-h width-85"},[s("div",{staticClass:"content text-center"},[s("p",{staticClass:"text-light"},[t._v("Made with \n\n\t\t\t\t\t\t"),s("span",[s("svg",{staticStyle:{"fill-rule":"evenodd","clip-rule":"evenodd","stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":"1.5"},attrs:{height:"100%",viewBox:"0 0 907 828",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","xml:space":"preserve","xmlns:serif":"http://www.serif.com/"}},[s("path",{staticStyle:{fill:"none","stroke-width":"100px"},attrs:{d:"M730.084,312.85c4.226,113.133 -40.828,236.381 -79.883,320.702c-29.137,63.033 -92.165,103.467 -161.607,103.675c-58.148,0.184 -129.832,0.398 -188.066,0.573c-68.886,0.206 -131.752,-39.215 -161.569,-101.314c-43.597,-90.793 -96.522,-224.663 -88.059,-325.713"}}),s("path",{staticStyle:{fill:"none","stroke-width":"75px"},attrs:{d:"M83.339,352.99l634.919,-1.948"}}),s("path",{staticStyle:{fill:"none","stroke-width":"75px"},attrs:{d:"M244.11,87.064l-54.656,150.983"}}),s("path",{staticStyle:{fill:"none","stroke-width":"75px"},attrs:{d:"M463.777,37.5l-79.086,206.267"}}),s("path",{staticStyle:{fill:"none","stroke-width":"75px"},attrs:{d:"M618.892,124.663l-49.707,118.199"}}),s("path",{staticStyle:{fill:"none","stroke-width":"75px"},attrs:{d:"M730.433,429.13l137.329,0c0,0 27.947,188.444 -226.001,233.406"}}),s("path",{staticStyle:{fill:"none","stroke-width":"50px"},attrs:{d:"M103.65,802.194l606.437,0"}})])]),t._v(" \n\t\t\t\t\t\tby \n\n\t\t\t\t\t\t"),s("a",{attrs:{href:"https://github.com/k-flynn-webdev"}},[t._v(" k-flynn-webdev ")])])])])])])])},f=[],h={name:"cFooter",mounted(){document.body.appendChild(this.$refs.footer)},beforeDestroy(){document.body.removeChild(this.$refs.footer),this.$refs.parent.appendChild(this.$refs.footer)}},g=h,_=(s("5592"),Object(u["a"])(g,m,f,!1,null,"1c73e935",null));_.options.__file="c_footer.vue";var v=_.exports;s("23a4"),s("143e"),s("ff4e");var b={name:"App",created(){this.$store.dispatch("user/init",this.$request.get_SecureKeyFile)},computed:{},methods:{},components:{"c-navbar":p,"c-footer":v}},x=b,w=Object(u["a"])(x,n,r,!1,null,null,null);w.options.__file="App.vue";var C=w.exports,j=s("8c4f"),k=s("2f62");function y(t){if(!1===t||"false"===t)return!1;let e={},s=[];return s=t.split("."),e.raw=t,e.payload=JSON.parse(window.atob(s[1])),e.payload}function $(){let t=window.localStorage.getItem("tokenStringKube");return null===t?"":t}function S(t){window.localStorage.setItem("tokenStringKube",t)}function E(){window.localStorage.removeItem("tokenStringKube")}var O={namespaced:!0,state:{requestObj:Function,session:{active:Boolean,user:{id:String,name:String,email:String,role:String},token:"token"}},getters:{get_active:function(t){return t.session.active},get_user:function(t){return t.session.user},get_token:function(t){return t.session.token}},mutations:{requestObj:function(t,e){t.requestObj=e},active:function(t,e){t.session.active=e},user:function(t,e){t.session.user.id=e.id,t.session.user.name=e.name,t.session.user.email=e.email,t.session.user.role=e.role},token:function(t,e){t.session.token=e,S(e),t.requestObj()}},actions:{init:function(t,e){t.commit("requestObj",e);let s=$();s.length<5?t.dispatch("logout_success"):t.dispatch("login_success",s)},login_success:function(t,e){let s=y(e);t.commit("active",!0),t.commit("user",s),t.commit("token",e)},logout_success:function(t){let e={id:"",name:"",email:"",role:""};t.commit("active",!1),t.commit("user",e),t.commit("token",""),E()}}};a["a"].use(k["a"]);var q=new k["a"].Store({state:{counter:0},mutations:{increment:function(t,e){t.counter+=e},decrement:function(t,e){t.counter-=e}},getters:{count:function(t){return t.counter}},actions:{},modules:{user:O}}),T=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},D=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"center-auto-h width-90"},[s("h1",{staticClass:"heading"},[t._v("Basic Vue site (client and server).")]),s("p",{staticClass:"title"},[t._v("A simple vue package with the goal of being secure via JsonWebTokens.")]),s("br"),s("b",{staticClass:"text text-bold"},[t._v("Frameworks:")]),s("ul",{staticClass:"text text-small",staticStyle:{"margin-left":"2rem"}},[s("li",[t._v("Vuejs and VueX store.")]),s("li",[t._v("Node and Express for the server.")]),s("li",[t._v("Mongodb for the database.")])]),s("b",{staticClass:"text text-bold"},[t._v("Front Features:")]),s("ul",{staticClass:"text text-small",staticStyle:{"margin-left":"2rem"}},[s("li",[t._v("User login/register/logout page.")]),s("li",[t._v("User acount/edit/remove page.")]),s("li",[t._v("Admin request form.")]),s("li",[t._v("Admin dashboard.")]),s("li",[t._v("View last 30 days of user acccount activities.")]),s("li",[t._v("View/edit/remove all users.")]),s("li",[t._v("Review/reset all database items/collections.")]),s("li",[t._v("User secure token handled via VueX locally.")])]),s("b",{staticClass:"text text-bold"},[t._v("Server Features:")]),s("ul",{staticClass:"text text-small",staticStyle:{"margin-left":"2rem"}},[s("li",[t._v("Input validation on all form data.")]),s("li",[t._v("Request rate limiting.")]),s("li",[t._v("User/Admin validation on all routes via secure header/token.")]),s("li",[t._v("Token blacklisting.")]),s("li",[t._v("Unit test for all user interactions.")])]),s("p")])}],P={name:"home",components:{}},A=P,I=Object(u["a"])(A,T,D,!1,null,null,null);I.options.__file="Index.vue";var B=I.exports,N=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("c-panel",{staticClass:"flex-only-on-large"},[s("div",{attrs:{slot:"header"},slot:"header"},[t._v("\n\t\tAccount Register\n\t")]),s("form",{staticClass:"form",attrs:{action:"/api/account/create",method:"POST"},on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[s("c-account-input",{attrs:{Input:t.AccountInfo}}),s("c-button",{attrs:{progress:t.progress}}),s("c-message",{ref:"messageBtn"})],1),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("div",[s("p",[t._v("\n\t\t\t\tAlready have an account, \n\t\t\t\t"),s("router-link",{attrs:{to:"/login"}},[t._v("login?")])],1)]),s("div",[s("p",[t._v("\n\t\t\t\tTry a\n\t\t\t\t"),s("router-link",{attrs:{to:"/demo"}},[t._v("demo?")])],1)])])])},R=[],z=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"account-input"},[t.NameShow?s("div",{staticClass:"field"},[s("p",{staticClass:"text label"},[t._v("Name:")]),s("input",{staticClass:"text",attrs:{type:"string",name:"name",placeholder:"Name",required:t.Input.Name.isRequired},domProps:{value:t.Input.Name.value}})]):t._e(),t.EmailShow?s("div",{staticClass:"field"},[s("p",{staticClass:"text label"},[t._v("Email:")]),s("input",{staticClass:"text",attrs:{type:"email",name:"email",placeholder:"Email",required:t.Input.Email.isRequired},domProps:{value:t.Input.Email.value}})]):t._e(),t.PasswordShow?s("div",{staticClass:"field"},[s("p",{staticClass:"text label"},[t._v("Password:")]),s("input",{staticClass:"text",attrs:{type:"password",name:"password",placeholder:"Password",required:t.Input.Password.isRequired},domProps:{value:t.Input.Password.value}})]):t._e()])},M=[],U={name:"AccountInput",props:{Input:{Name:Object,Email:Object,Password:Object}},computed:{NameShow:function(){return!(void 0===this.Input.Name||!this.Input.Name.show)},EmailShow:function(){return!(void 0===this.Input.Email||!this.Input.Email.show)},PasswordShow:function(){return!(void 0===this.Input.Password||!this.Input.Password.show)}}},L=U,F=(s("2aab"),Object(u["a"])(L,z,M,!1,null,null,null));F.options.__file="c_account_input.vue";var K=F.exports,J=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"button fade-in",class:{"is-loading":t.waiting,"is-success":t.success,"is-error":t.error},on:{click:t.clicked}},[s("p",{staticClass:"text text-light"},[t._t("default",[t._v(" \n\t\t\t \tSubmit \n\t\t\t")])],2),s("span",{staticClass:"loading"}),s("span",{staticClass:"loading"}),s("span",{staticClass:"loading"})])},V=[],H={name:"cButton",props:{onClick:Function,progress:Object},computed:{success:function(){return void 0!==this.progress&&void 0!==this.progress.success&&this.progress.success},waiting:function(){return void 0!==this.progress&&void 0!==this.progress.waiting&&this.progress.waiting},error:function(){return void 0!==this.progress&&void 0!==this.progress.error&&this.progress.error}},methods:{clicked:function(){void 0!==this.onClick&&this.onClick()}}},X=H,G=(s("98bc"),Object(u["a"])(X,J,V,!1,null,null,null));G.options.__file="c_button.vue";var W=G.exports,Q=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"panel width-90 center-auto-h shadow"},[s("header",{class:{"no-split":t.no_split}},[s("p",{staticClass:"title text-uppercase text-small"},[t._t("header")],2),s("p",{staticClass:"title text-small"},[t._t("header-no-cap")],2),s("span",{staticClass:"options flex-row flex-row-end"},[t._t("options")],2)]),s("main",[t._t("default")],2),t._t("no-margin"),s("footer",[s("p",{staticClass:"text"},[t._t("footer")],2)])],2)},Y=[];s("2dd7");var Z={name:"cPanel",props:{no_split:Boolean}},tt=Z,et=(s("5f9b"),Object(u["a"])(tt,Q,Y,!1,null,null,null));et.options.__file="c_panel.vue";var st=et.exports,at=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"message"},[s("p",{class:t.get_class},[t._v(" "+t._s(t.get_message)+" ")])])},nt=[],rt={name:"cMessage",data(){return{obj:{class:"",message:""},duration_sec:4}},props:{},computed:{get_class:function(){return this.obj.class},get_message:function(){return this.obj.message}},methods:{message_set:function(t){this.obj.class=t.class,this.obj.message=t.message,this.message_reset()},message_reset:function(){let t=this;setTimeout(function(){t.obj.class=""},1e3*(t.duration_sec-1)),setTimeout(function(){t.obj.message=""},1e3*t.duration_sec)}},mounted(){this.$on("message",this.message_set)},beforeDestroy(){this.$off("message",this.message_set)},components:{}},ot=rt,it=(s("3ae8"),Object(u["a"])(ot,at,nt,!1,null,"229183e4",null));it.options.__file="c_message.vue";var ct=it.exports,lt={name:"Register",data(){return{progress:{waiting:!1,success:!1,error:!1},AccountInfo:{Name:{show:!0,isRequired:!0,value:""},Email:{show:!0,isRequired:!0,value:""},Password:{show:!0,isRequired:!0,value:""}}}},created(){},methods:{button_reset:function(){let t=this;setTimeout(function(){t.progress.waiting=!1,t.progress.success=!1,t.progress.error=!1},1e3)},onSubmit:function(t){this.progress.waiting=!0;let e=this;this.$request.request_url_form(t,function(t,s){if(e.button_reset(),t)return e.progress.error=!0,void e.$refs.messageBtn.$emit("message",{class:"error text-negative",message:t.message});e.progress.success=!0,e.$refs.messageBtn.$emit("message",{class:"success text-positive",message:s.message}),setTimeout(function(){e.$store.dispatch("user/login_success",s.token),e.$router.push("/")},1e3)})}},components:{"c-account-input":K,"c-button":W,"c-panel":st,"c-message":ct}},ut=lt,dt=Object(u["a"])(ut,N,R,!1,null,null,null);dt.options.__file="Register.vue";var pt=dt.exports,mt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("c-panel",[s("div",{attrs:{slot:"header"},slot:"header"},[t._v("\n\t\tAccount Login\n\t")]),s("form",{staticClass:"form",attrs:{action:"/api/account/login",method:"POST"},on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[s("c-account-input",{attrs:{Input:t.AccountInfo}}),s("c-button",{attrs:{progress:t.progress}})],1),s("c-message",{ref:"messageBtn"}),s("div",{attrs:{slot:"footer"},slot:"footer"},[t._v("\n\t\tDont have an account, why not \n\t\t"),s("router-link",{attrs:{to:"/register"}},[t._v("register?")])],1)],1)},ft=[],ht={name:"Login",data(){return{progress:{waiting:!1,success:!1,error:!1},AccountInfo:{Name:{show:!1,isRequired:!1,value:""},Email:{show:!0,isRequired:!0,value:""},Password:{show:!0,isRequired:!0,value:""}}}},created(){},methods:{button_reset:function(){let t=this;setTimeout(function(){t.progress.waiting=!1,t.progress.success=!1,t.progress.error=!1},1e3)},onSubmit:function(t){this.progress.waiting=!0;let e=this;this.$request.request_url_form(t,function(t,s){if(e.button_reset(),t)return e.progress.error=!0,void e.$refs.messageBtn.$emit("message",{class:"error text-negative",message:t.message});e.progress.success=!0,e.$refs.messageBtn.$emit("message",{class:"success text-positive",message:s.message}),setTimeout(function(){e.$store.dispatch("user/login_success",s.token),e.$router.push("/")},1e3)})}},components:{"c-account-input":K,"c-button":W,"c-message":ct,"c-panel":st}},gt=ht,_t=Object(u["a"])(gt,mt,ft,!1,null,null,null);_t.options.__file="Login.vue";var vt=_t.exports,bt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("c-panel",[s("div",{attrs:{slot:"header"},slot:"header"},[t._v("\n\t\tAccount Logout\n\t")]),s("form",{staticClass:"form",attrs:{action:"/api/account/logout",method:"POST"},on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[s("c-button",{attrs:{progress:t.progress}}),s("c-message",{ref:"messageBtn"})],1)])},xt=[],wt={name:"Logout",data(){return{progress:{waiting:!1,success:!1,error:!1}}},created(){},methods:{button_reset:function(){let t=this;setTimeout(function(){t.progress.waiting=!1,t.progress.success=!1,t.progress.error=!1},1e3)},onSubmit:function(t){this.progress.waiting=!0;let e=this;this.$request.request_url_form(t,function(t,s){if(e.button_reset(),t)return e.progress.error=!0,e.$refs.messageBtn.$emit("message",{class:"error text-negative",message:t.message}),void e.logout();e.progress.success=!0,e.$refs.messageBtn.$emit("message",{class:"success text-positive",message:s.message}),e.logout()})},logout:function(){let t=this;setTimeout(function(){t.$store.dispatch("user/logout_success",""),t.$router.push("/")},1e3)}},components:{"c-button":W,"c-panel":st,"c-message":ct}},Ct=wt,jt=Object(u["a"])(Ct,bt,xt,!1,null,null,null);jt.options.__file="Logout.vue";var kt=jt.exports,yt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex-only-on-large"},[t.isDeleting?s("c-popup",{attrs:{onClick:t.hide_delete}},[s("div",{attrs:{slot:"header"},slot:"header"},[t._v("\n\t\t\tDelete Account\n\t\t")]),s("p",{staticClass:"text"},[t._v(" Are you sure you want to delete ")]),s("p",{staticClass:"text"},[t._v(" this account? ")]),s("br"),s("div",{staticClass:"flex-row flex-row-between"},[s("c-button",{attrs:{onClick:t.hide_delete,type:"button"}},[t._v("\n\t\t\t\tClose\n\t\t\t")]),s("c-button",{staticClass:"colour-negative-bg",attrs:{type:"button",onClick:t.onSubmit_delete}},[t._v("\n\t\t\t\tDelete\n\t\t\t")])],1),s("c-message",{ref:"messageBtnDel"})],1):t._e(),s("c-panel",[s("div",{attrs:{slot:"header"},slot:"header"},[t._v("\n\t\t\tAccount\n\t\t")]),s("form",{staticClass:"form",attrs:{action:"/api/account/?_method=PUT",method:"POST"},on:{submit:function(e){return e.preventDefault(),t.onSubmit_update(e)}}},[t.isEditing?s("c-account-input",{attrs:{Input:t.account}}):s("c-account-text",{attrs:{Input:t.account}}),s("div",{staticClass:"flex-row flex-row-between",class:{"is-edit":!t.isEditing}},[s("c-button",{staticClass:"colour-yellow",attrs:{onClick:t.edit_switch,type:"button"}},[t._v("\n\t\t\t\t\t"+t._s(t.button_undo_label)+"\n\t\t\t\t")]),s("c-button",{directives:[{name:"show",rawName:"v-show",value:t.isEditing,expression:"isEditing"}],staticClass:"colour-positive-bg",attrs:{type:"submit",progress:t.progress_update}},[t._v("\n\t\t\t\t\tUpdate \n\t\t\t\t")]),s("c-button",{directives:[{name:"show",rawName:"v-show",value:t.isEditing,expression:"isEditing"}],staticClass:"colour-negative-bg",attrs:{type:"button",onClick:t.popup_delete,progress:t.progress_delete}},[t._v("\n\t\t\t\t\tDelete\n\t\t\t\t")])],1),s("c-message",{ref:"messageBtn"})],1)])],1)},$t=[],St=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"account-text"},[t.NameShow?s("div",{staticClass:"field"},[s("p",{staticClass:"text label"},[t._v("Name:")]),s("p",{staticClass:"text account-text-item"},[t._v("\n\t\t\t"+t._s(t.Input.Name.value)+"\n\t\t")])]):t._e(),t.EmailShow?s("div",{staticClass:"field"},[s("p",{staticClass:"text label"},[t._v("Email:")]),s("p",{staticClass:"text account-text-item"},[t._v("\n\t\t\t"+t._s(t.Input.Email.value)+"\n\t\t")])]):t._e(),t.PasswordShow?s("div",{staticClass:"field"},[s("p",{staticClass:"text label"},[t._v("Password:")]),s("p",{staticClass:"text account-text-item"},[t._v("\n\t\t\t"+t._s(t.getPassword)+"\n\t\t")])]):t._e()])},Et=[],Ot={name:"AccountText",props:{Input:{Name:Object,Email:Object,Password:Object}},computed:{NameShow:function(){return!(void 0===this.Input.Name||!this.Input.Name.show)},EmailShow:function(){return!(void 0===this.Input.Email||!this.Input.Email.show)},PasswordShow:function(){return!(void 0===this.Input.Password||!this.Input.Password.show)},getPassword:function(){return"hidden"}}},qt=Ot,Tt=(s("5681"),Object(u["a"])(qt,St,Et,!1,null,"d1c0f190",null));Tt.options.__file="c_account_text.vue";var Dt=Tt.exports,Pt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"popup",staticClass:"test popup-fill",staticStyle:{"z-index":"50"}},[s("div",{staticClass:"fill-all shade",on:{click:t.clicked}}),s("div",{staticClass:"panel center-auto-h width-95 shadow",staticStyle:{position:"relative","z-index":"10"}},[s("header",[s("p",{staticClass:"title text-uppercase text-med text-small"},[t._t("header")],2),t._t("options")],2),s("main",[t._t("default"),t._t("no-margin")],2),s("footer",[s("p",{staticClass:"text"},[t._t("footer")],2)])])])},At=[];s("2dd7");var It={name:"cPopUp",data(){return{show:!1}},props:{onClick:Function},methods:{clicked:function(){void 0!==this.onClick&&this.onClick()}},mounted(){document.body.appendChild(this.$refs.popup)},components:{}},Bt=It,Nt=(s("35a5"),Object(u["a"])(Bt,Pt,At,!1,null,"696cbd22",null));Nt.options.__file="c_popup.vue";var Rt=Nt.exports;const zt={methods:{expired_token_check:function(t){if(401===t.status&&"jwt expired"===t.message){let t=this;return setTimeout(function(){t.$router.push("/login")},2e3),!0}return!1}}};var Mt={name:"Account",mixins:[zt],data(){return{isEditing:!1,isDeleting:!1,progress_update:{waiting:!1,success:!1,error:!1},progress_delete:{waiting:!1,success:!1,error:!1},account:{Name:{show:!0,isRequired:!0,value:""},Email:{show:!0,isRequired:!0,value:""},Password:{show:!0,isRequired:!0,value:""}}}},computed:{button_undo_label:function(){return this.isEditing?"undo":"edit"}},created(){},mounted(){this.get_user()},methods:{popup_delete:function(){this.isDeleting=!0},hide_delete:function(){this.isDeleting=!1},get_user:function(){let t=this.$store.getters["user/get_user"];this.account.Name.value=t.name,this.account.Email.value=t.email},edit_switch:function(){this.isEditing=!this.isEditing},button_reset_update:function(){let t=this;setTimeout(function(){t.progress_update.waiting=!1,t.progress_update.success=!1,t.progress_update.error=!1},1e3)},button_reset_delete:function(){let t=this;setTimeout(function(){t.progress_delete.waiting=!1,t.progress_delete.success=!1,t.progress_delete.error=!1},1e3)},onSubmit_update:function(t){let e=this;this.progress_update.waiting=!0,this.$request.request_url_form(t,function(t,s){if(e.button_reset_update(),t)return e.expired_token_check(t),e.progress_update.error=!0,void e.$refs.messageBtn.$emit("message",{class:"error text-negative",message:t.message});e.progress_update.success=!0,e.$refs.messageBtn.$emit("message",{class:"success text-positive",message:s.message}),setTimeout(function(){e.$store.dispatch("user/login_success",s.token),e.$router.push("/")},1e3)})},onSubmit_delete:function(t){let e=this,s={url:"/api/account/?_method=DELETE",method:"POST",body:""};this.progress_delete.waiting=!0,this.$request.request_url(s,function(t,s){if(t)return e.expired_token_check(t)&&setTimeout(function(){e.hide_delete()},1400),e.progress_delete.error=!0,void e.$refs.messageBtnDel.$emit("message",{class:"error text-negative",message:t.message});e.progress_delete.success=!0,e.$refs.messageBtnDel.$emit("message",{class:"success text-positive",message:s.message}),e.button_reset_delete(),setTimeout(function(){e.hide_delete()},1400),setTimeout(function(){e.$store.dispatch("user/logout_success"),e.$router.push("/")},1900)})}},components:{"c-button":W,"c-panel":st,"c-popup":Rt,"c-account-input":K,"c-account-text":Dt,"c-message":ct}},Ut=Mt,Lt=Object(u["a"])(Ut,yt,$t,!1,null,null,null);Lt.options.__file="Account.vue";var Ft=Lt.exports,Kt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h1",{staticClass:"title text-center text-light",staticStyle:{"margin-bottom":"1rem"}},[t._v("Dashboard:")]),s("div",{staticClass:"admin flex-only-on-large"},[s("c-admin-edit"),s("c-admin-users-graph"),s("c-admin-users-month"),s("c-admin-users-all"),s("c-admin-db")],1)])},Jt=[],Vt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("c-panel",{staticClass:"admin order"},[s("div",{attrs:{slot:"header-no-cap"},slot:"header-no-cap"},[s("span",{staticClass:"text-uppercase"},[t._v(" Database ")])]),s("div",{staticClass:"account-text"},[s("table",{staticStyle:{margin:"0 !important",padding:"0 !important"},attrs:{slot:"no-margin"},slot:"no-margin"},[s("thead",{staticClass:"head"},[s("tr",{staticClass:"row"},[s("th",{staticClass:"text text-blur colour-text-dark"},[t._v("Name")]),s("th",{staticClass:"text text-blur colour-text-dark"},[t._v("Count")]),s("th",{staticClass:"text text-blur colour-text-dark"},[t._v("Size")]),s("th",{staticClass:"text text-blur colour-text-dark"})])]),s("tbody",t._l(t.data,function(e){return s("tr",{key:e.name,staticClass:"row"},[s("td",{staticClass:"text"},[s("p",[t._v(" "+t._s(e.name))])]),s("td",{staticClass:"text"},[s("p",[t._v(" "+t._s(e.count))])]),s("td",{staticClass:"text"},[s("p",[t._v(" \n\t\t\t\t\t\t\t"+t._s((e.storageSize/1e3).toFixed(2))+" KB\n\t\t\t\t\t\t")])]),t.all_button(e.name)?s("td",{staticClass:"text"},[s("button",{staticClass:"button text-light",on:{click:function(s){t.reset_db(e.name)}}},[t._v("\n\t\t\t\t\t\t\t\treset\n\t\t\t\t\t\t")])]):t._e()])}),0)])]),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("c-message",{ref:"messageBtn"})],1)])},Ht=[],Xt={name:"cAdminDB",mixins:[zt],data(){return{data:Array}},mounted(){this.get_db_stats()},methods:{all_button:function(t){return t.toLowerCase()!=="All".toLowerCase()},reset_db:function(t){let e=this,s={url:"/api/admin/reset/"+t.toLowerCase(),method:"POST",body:""};this.$request.request_url(s,function(t,s){if(t)return e.$refs.messageBtn.$emit("message",{class:"error text-negative",message:t.message}),void e.expired_token_check(t);e.$refs.messageBtn.$emit("message",{class:"success text-positive",message:s.message}),setTimeout(function(){e.get_db_stats()},1e3)})},get_db_stats:function(){let t=this,e={url:"/api/admin/stats",method:"POST",body:""};this.$request.request_url(e,function(e,s){if(e)return t.expired_token_check(e),void t.$refs.messageBtn.$emit("message",{class:"error text-negative",message:e.message});t.data=s.data})}},components:{"c-button":W,"c-panel":st,"c-message":ct}},Gt=Xt,Wt=(s("3e3b"),Object(u["a"])(Gt,Vt,Ht,!1,null,"1cfc48e1",null));Wt.options.__file="c_admin_db.vue";var Qt=Wt.exports,Yt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.show_delete?s("c-popup",{staticClass:"admin",staticStyle:{"z-index":"100"},attrs:{onClick:t.hide_delete}},[s("div",{attrs:{slot:"header"},slot:"header"},[t._v("\n\t\t\tDelete user\n\t\t")]),s("p",{staticClass:"text"},[t._v(" Are you sure you want to delete ")]),s("p",{staticClass:"text"},[t._v(" this account? ")]),s("br"),s("div",{staticClass:"flex-row flex-row-between"},[s("c-button",{attrs:{onClick:t.hide_delete,type:"button"}},[t._v("\n\t\t\t\tClose\n\t\t\t")]),s("c-button",{staticClass:"colour-negative-bg",attrs:{type:"button",onClick:t.onSubmit_delete}},[t._v("\n\t\t\t\tDelete\n\t\t\t")])],1),s("c-message",{ref:"messageBtnDel"})],1):t._e(),t.show_edit?s("c-popup",{staticClass:"admin",attrs:{onClick:t.hide_edit}},[s("div",{attrs:{slot:"header"},slot:"header"},[t._v("\n\t\t\tEdit user\n\t\t")]),s("div",{staticStyle:{margin:"0 !important",padding:"0 !important"},attrs:{slot:"no-margin"},slot:"no-margin"},[s("form",{staticClass:"form",attrs:{action:t.form_url,method:"POST"},on:{submit:function(e){return e.preventDefault(),t.onSubmit_update(e)}}},[s("div",{staticClass:"field"},[s("p",{staticClass:"text label"},[t._v("Name:")]),s("input",{staticClass:"text",attrs:{type:"string",name:"name",placeholder:"Name"},domProps:{value:t.name}})]),s("div",{staticClass:"field"},[s("p",{staticClass:"text label"},[t._v("Email:")]),s("input",{staticClass:"text",attrs:{type:"email",name:"email",placeholder:"Email"},domProps:{value:t.email}})]),s("div",{staticClass:"field"},[s("p",{staticClass:"text label"},[t._v("Role:")]),s("input",{staticClass:"text",attrs:{type:"string",name:"role",placeholder:"Role"},domProps:{value:t.role}})]),s("div",{staticClass:"field"},[s("p",{staticClass:"text label"},[t._v("Created:")]),s("input",{staticClass:"text",attrs:{type:"date",name:"created",placeholder:"Role"},domProps:{value:t.created}})]),s("div",{staticClass:"field"},[s("p",{staticClass:"text label"},[t._v("Updated:")]),s("input",{staticClass:"text",attrs:{type:"date",name:"updated",placeholder:"Role"},domProps:{value:t.updated}})]),s("div",{staticClass:"field"},[s("p",{staticClass:"text label"},[t._v("Login:")]),s("input",{staticClass:"text",attrs:{type:"date",name:"login",placeholder:"Role"},domProps:{value:t.login}})]),s("div",{staticClass:"field"},[s("p",{staticClass:"text label"},[t._v("ID:")]),s("input",{staticClass:"text",attrs:{type:"string",name:"id",placeholder:"ID"},domProps:{value:t.id_user}})]),s("div",{staticClass:"flex-row flex-row-between"},[s("c-button",{staticClass:"colour-positive-bg",attrs:{type:"submit",progress:t.progress_update}},[t._v("\n\t\t\t\t\t\tUpdate \n\t\t\t\t\t")]),s("c-button",{staticClass:"colour-negative-bg",attrs:{type:"button",onClick:t.popup_delete,progress:t.progress_delete}},[t._v("\n\t\t\t\t\t\tDelete\n\t\t\t\t\t")])],1),s("c-message",{ref:"messageBtn"})],1)]),s("div",{attrs:{slot:"footer"},slot:"footer"})]):t._e()],1)},Zt=[],te={name:"cAdminEdit",mixins:[zt],data(){return{data:{id:"",name:"",email:"",role:"",created:"",updated:"",login:""},show_edit:!1,progress_update:{waiting:!1,success:!1,error:!1},show_delete:!1,progress_delete:{waiting:!1,success:!1,error:!1}}},mounted(){this.$root.$on("userAdminSelect",this.show_user)},computed:{name:function(){return this.data.name},email:function(){return this.data.email},role:function(){return this.data.role},created:function(){return new Date(this.data.created).toISOString().split("T")[0]},updated:function(){return new Date(this.data.updated).toISOString().split("T")[0]},login:function(){return new Date(this.data.login).toISOString().split("T")[0]},id_user:function(){return this.data.id},form_url:function(){return"/api/admin/user/"+this.id_user+"?_method=PUT"}},methods:{popup_edit:function(){this.show_edit=!0},hide_edit:function(){this.show_edit=!1},popup_delete:function(){this.show_delete=!0},hide_delete:function(){this.show_delete=!1},show_user:function(t){this.data.name=t.name,this.data.email=t.email,this.data.id=t.id,this.data.role=t.role,this.data.created=t.date.created,this.data.updated=t.date.updated,this.data.login=t.date.login,this.popup_edit()},button_update_reset:function(){let t=this;setTimeout(function(){t.progress_update.waiting=!1,t.progress_update.error=!1,t.progress_update.success=!1},1e3)},button_delete_reset:function(){let t=this;setTimeout(function(){t.progress_delete.waiting=!1,t.progress_delete.error=!1,t.progress_delete.success=!1},1e3)},onSubmit_update:function(t){this.progress_update.waiting=!0;let e=this;this.$request.request_url_form(t,function(t,s){if(e.button_update_reset(),t)return e.expired_token_check(t),e.progress_update.error=!0,void e.$refs.messageBtn.$emit("message",{class:"error text-negative",message:t.message});e.$refs.messageBtn.$emit("message",{class:"success text-positive",message:s.message}),e.progress_update.success=!0,e.$root.$emit("userChanged"),setTimeout(function(){e.hide_edit()},2300)})},onSubmit_delete:function(t){let e=this,s={url:"/api/admin/user/"+this.id_user+"?_method=DELETE",method:"POST",body:""};this.progress_delete.waiting=!0,this.$request.request_url(s,function(t,s){if(e.button_delete_reset(),t)return e.expired_token_check(t),e.progress_delete.error=!0,void e.$refs.messageBtnDel.$emit("message",{class:"error text-negative",message:t.message});e.$refs.messageBtnDel.$emit("message",{class:"success text-positive",message:s.message}),e.progress_delete.success=!0,e.$root.$emit("userChanged"),setTimeout(function(){e.hide_delete()},2e3),setTimeout(function(){e.hide_edit()},2300)})}},components:{"c-button":W,"c-popup":Rt,"c-message":ct}},ee=te,se=Object(u["a"])(ee,Yt,Zt,!1,null,null,null);se.options.__file="c_admin_edit.vue";var ae=se.exports,ne=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("c-panel",{staticClass:"admin order"},[s("div",{attrs:{slot:"header-no-cap"},slot:"header-no-cap"},[s("span",{staticClass:"text-uppercase"},[t._v(" users ")]),s("span",[t._v(" (all) : "+t._s(t.data.length)+" ")])]),s("table",{staticStyle:{margin:"0 !important",padding:"0 !important"},attrs:{slot:"no-margin"},slot:"no-margin"},[s("thead",{staticClass:"head"},[s("tr",{staticClass:"row"},[s("th",{staticClass:"text text-blur colour-text-dark"},[t._v("Name")]),s("th",{staticClass:"text text-blur colour-text-dark"},[t._v("Email")]),s("th",{staticClass:"text text-blur colour-text-dark"},[t._v("Role")]),s("th",{staticClass:"text text-blur colour-text-dark"})])]),s("tbody",t._l(t.data,function(e){return s("tr",{key:e.email,staticClass:"row"},[s("td",{staticClass:"text"},[s("p",[t._v(" "+t._s(e.name)+" ")])]),s("td",{staticClass:"text"},[s("p",[t._v(" "+t._s(e.email)+" ")])]),s("td",{staticClass:"text"},[s("p",[t._v(" "+t._s(e.role)+" ")])]),s("td",{staticClass:"text"},[s("button",{staticClass:"button text-light",on:{click:function(s){t.onClick(e)}}},[t._v("\n\t\t\t\t\t\tO\n\t\t\t\t\t")])])])}),0)]),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("c-message",{ref:"messageBtn"})],1)])},re=[],oe={name:"cAdminUsersAll",mixins:[zt],data(){return{data:Array}},mounted(){this.get_users_all(),this.$root.$on("userChanged",this.event_get_users_all)},methods:{onClick:function(t){this.$root.$emit("userAdminSelect",t)},event_get_users_all:function(){let t=this;setTimeout(function(){t.get_users_all()},1e3)},get_users_all:function(){let t=this,e={url:"/api/admin/user/all",method:"POST",body:""};this.$request.request_url(e,function(e,s){if(e)return t.expired_token_check(e),void t.$refs.messageBtn.$emit("message",{class:"error text-negative",message:e.message});t.data=s.data})}},components:{"c-panel":st,"c-message":ct}},ie=oe,ce=(s("1cf3"),Object(u["a"])(ie,ne,re,!1,null,"085c87f2",null));ce.options.__file="c_admin_users_all.vue";var le=ce.exports,ue=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("c-panel",{staticClass:"admin"},[s("div",{attrs:{slot:"header-no-cap"},slot:"header-no-cap"},[s("span",{staticClass:"text-uppercase"},[t._v(" users ")]),s("span",[t._v(" (30days) : "+t._s(t.data.new.length)+" ")])]),s("div",{staticStyle:{margin:"0 !important",padding:"0 !important"},attrs:{slot:"no-margin"},slot:"no-margin"},[s("table",{staticStyle:{margin:"0 !important",padding:"0 !important"}},[s("thead",{staticClass:"head"},[s("tr",{staticClass:"row"},[s("th",{staticClass:"text text-blur colour-text-dark"},[t._v("Name")]),s("th",{staticClass:"text text-blur colour-text-dark"},[t._v("Email")]),s("th",{staticClass:"text text-blur colour-text-dark"},[t._v("Role")]),s("th",{staticClass:"text text-blur colour-text-dark"})])]),s("tbody",t._l(t.data.new,function(e){return s("tr",{key:e.id,staticClass:"row"},[s("td",{staticClass:"text"},[s("p",[t._v(" "+t._s(e.name))])]),s("td",{staticClass:"text"},[s("p",[t._v(" "+t._s(e.email)+" ")])]),s("td",{staticClass:"text"},[s("p",[t._v(" "+t._s(e.role)+" ")])]),s("td",{staticClass:"text"},[s("button",{staticClass:"button text-light",on:{click:function(s){t.onClick(e)}}},[t._v("\n\t\t\t\t\t\t\tO\n\t\t\t\t\t\t")])])])}),0)])]),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("c-message",{ref:"messageBtn"})],1)])},de=[],pe={name:"cAdminUsersMonth",mixins:[zt],data(){return{data:{new:[],login:[],updated:[]}}},mounted(){this.get_users_month(),this.$root.$on("userChanged",this.event_get_users_month)},methods:{onClick:function(t){this.$root.$emit("userAdminSelect",t)},event_get_users_month:function(){let t=this;setTimeout(function(){t.get_users_month()},1e3)},get_users_month:function(){let t=this,e={url:"/api/admin/user/month",method:"POST",body:""};this.$request.request_url(e,function(e,s){if(e)return t.expired_token_check(e),void t.$refs.messageBtn.$emit("message",{class:"error text-negative",message:e.message});t.data=s.data,t.$root.$emit("adminMonthData",s.data)})}},components:{"c-button":W,"c-panel":st,"c-message":ct}},me=pe,fe=(s("80a3"),Object(u["a"])(me,ue,de,!1,null,"8067ca94",null));fe.options.__file="c_admin_users_month.vue";var he=fe.exports,ge=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"admin panel width-90 center-auto-h shadow order",staticStyle:{"flex-grow":"3 !important"}},[s("header",[s("p",{staticClass:"title text-uppercase text-small"},[s("span",{staticClass:"text-uppercase"},[t._v(" Users ("+t._s(t.graph_length)+" days) ")])])]),t._m(0)])},_e=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{margin:"0 !important",padding:"0 !important",height:"150px !important"}},[s("canvas",{attrs:{id:"id-chart"}})])}],ve=s("5b20"),be=s.n(ve),xe={name:"cAdminUserGraph",data(){return{graph_length:30,chartData:{type:"bar",data:{labels:[],datasets:[{label:"new",data:[],backgroundColor:[]},{label:"login",data:[],backgroundColor:[]},{label:"updated",data:[],backgroundColor:[]}]},options:{responsive:!0,maintainAspectRatio:!1}}}},created(){},mounted(){this.$root.$on("adminMonthData",this.draw_graph),this.default_graph_setup()},computed:{},methods:{draw_graph:function(t){let e=this;setTimeout(function(){e.convert_users_to_days(t),e.createChart("id-chart",e.chartData)},2e3)},date_to_int:function(t){let e=864e5,s=Math.ceil(new Date(t).getTime()/e),a=Math.ceil((new Date).getTime()/e),n=a-s;return n},default_graph_setup:function(){this.chartData.data.datasets=[{label:"new",data:[],backgroundColor:[]},{label:"login",data:[],backgroundColor:[]},{label:"updated",data:[],backgroundColor:[]}];for(let t=0;t<this.graph_length;t++)t%3?this.chartData.data.labels.push("."):this.chartData.data.labels.push(t);for(let t=0;t<this.graph_length;t++)this.chartData.data.datasets[0].backgroundColor.push("rgba(200, 10, 10, .4)"),this.chartData.data.datasets[1].backgroundColor.push("rgba(10, 200, 10, .4)"),this.chartData.data.datasets[2].backgroundColor.push("rgba(10, 10, 200, .4)")},convert_users_to_days:function(t){let e=[],s=[],a=[];for(let n=0;n<this.graph_length;n++)e.push(0),s.push(0),a.push(0);for(let n=0;n<t.new.length;n++){let s=this.date_to_int(t.new[n].date.created);s<=this.graph_length&&(e[s]+=1)}for(let n=0;n<t.login.length;n++){let e=this.date_to_int(t.login[n].date.login);e<=this.graph_length&&(s[e]+=1)}for(let n=0;n<t.updated.length;n++){let e=this.date_to_int(t.updated[n].date.updated);e<=this.graph_length&&(a[e]+=1)}this.chartData.data.datasets[0].data=e,this.chartData.data.datasets[1].data=s,this.chartData.data.datasets[2].data=a},createChart:function(t,e){const s=document.getElementById(t);new be.a(s,{type:e.type,data:e.data,options:e.options})}},components:{"c-button":W,"c-panel":st}},we=xe,Ce=(s("8448"),Object(u["a"])(we,ge,_e,!1,null,"feebb7e2",null));Ce.options.__file="c_admin_users_graph.vue";var je=Ce.exports,ke={name:"Admin",data(){return{}},mounted(){},methods:{},components:{"c-admin-edit":ae,"c-admin-db":Qt,"c-admin-users-all":le,"c-admin-users-month":he,"c-admin-users-graph":je}},ye=ke,$e=Object(u["a"])(ye,Kt,Jt,!1,null,null,null);$e.options.__file="Admin.vue";var Se=$e.exports,Ee=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("c-panel",{staticClass:"flex-only-on-large"},[s("div",{attrs:{slot:"header"},slot:"header"},[t._v("\n\t\tAdmin Request\n\t")]),s("form",{staticClass:"form",attrs:{action:"/api/admin/request",method:"POST"},on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[s("div",{staticClass:"field"},[s("p",{staticClass:"text label"},[t._v("Password:")]),s("input",{staticClass:"text",attrs:{type:"password",name:"password",placeholder:"Admin Password"}})]),s("c-button",{attrs:{progress:t.progress}})],1)])},Oe=[],qe={name:"AdminCreate",data(){return{progress:{waiting:!1,success:!1,error:!1}}},created(){},methods:{button_reset:function(){let t=this;setTimeout(function(){t.progress.waiting=!1,t.progress.success=!1,t.progress.error=!1},1e3)},onSubmit:function(t){this.progress.waiting=!0;let e=this;this.$request.request_url_form(t,function(t,s){if(e.button_reset(),t)return e.progress.error=!0,void console.log("error");e.progress.success=!0,setTimeout(function(){e.$store.dispatch("user/login_success",s.token),e.$router.push("/")},1e3)})}},components:{"c-button":W,"c-panel":st}},Te=qe,De=Object(u["a"])(Te,Ee,Oe,!1,null,null,null);De.options.__file="AdminRequest.vue";var Pe=De.exports;a["a"].use(j["a"]);const Ae=(t,e,s)=>{if("user"!==t.meta.type&&"admin"!==t.meta.type)return s();let a=q.getters["user/get_user"],n="user"===a.role,r="admin"===a.role;return"user"===t.meta.type&&(n||r)?s():"admin"===t.meta.type&&r?s():s({path:"/login"})};var Ie=new j["a"]({mode:"history",base:"/",routes:[{path:"/",name:"index",component:B},{path:"/register",name:"register",component:pt},{path:"/login",name:"login",component:vt},{path:"/logout",name:"logout",component:kt,meta:{type:"user"},beforeEnter:Ae},{path:"/account",name:"account",component:Ft,beforeEnter:Ae,meta:{type:"user"},beforeEnter:Ae},{path:"/admin/request",name:"adminrequest",component:Pe,meta:{type:"user"},beforeEnter:Ae},{path:"/admin",name:"admin",component:Se,meta:{type:"admin"},beforeEnter:Ae}]});function Be(t,e,s=!1,a,n){var r=new XMLHttpRequest;r.open(e,t,!0),s&&r.setRequestHeader("Content-Type","application/json; charset=UTF-8");let o=ze();o.length>5&&r.setRequestHeader("Authorization","Bearer "+o),r.send(a),r.onload=function(){if(this.status>=200&&this.status<300)return n(null,JSON.parse(this.responseText));let t={};try{t=JSON.parse(this.responseText.toString("ascii"))}catch(e){let t=this.statusText;return 0===t.length&&(t="No network connection."),n({status:this.status,message:this.statusText})}return n(t)},r.ontimeout=function(){return n(this.response)},r.onerror=function(){let t=this.statusText;return 0===t.length&&(t="No network connection."),n({status:this.status,message:t})}}let Ne="";function Re(t){Ne=t.length<=5?"":t}function ze(){return Ne}function Me(){let t=window.localStorage.getItem("tokenStringKube");Re(t)}function Ue(t,e){t.preventDefault();let s=t.target.action,a=t.target.method,n=new FormData(t.target);Be(s,a,!1,n,function(t,s){return t?e(t):e(null,s)})}function Le(t,e){let s={};void 0!==t.body&&(s=t.body),void 0!==t.content&&(s=t.content),Be(t.url,t.method,!1,s,function(t,s){return t?e(t):e(null,s)})}let Fe={request_url:Le,request_url_form:Ue,set_SecureKey:Re,get_SecureKey:ze,get_SecureKeyFile:Me};var Ke={install:function(t){t.prototype.$request=Fe}};a["a"].config.productionTip=!1,a["a"].use(Ke),new a["a"]({router:Ie,store:q,render:t=>t(C)}).$mount("#app")},"59c9":function(t,e,s){"use strict";var a=s("d4fc"),n=s.n(a);n.a},"5bb6":function(t,e,s){},"5f9b":function(t,e,s){"use strict";var a=s("e7a7"),n=s.n(a);n.a},"6a1c":function(t,e,s){},"80a3":function(t,e,s){"use strict";var a=s("862e"),n=s.n(a);n.a},8448:function(t,e,s){"use strict";var a=s("6a1c"),n=s.n(a);n.a},"862e":function(t,e,s){},"98bc":function(t,e,s){"use strict";var a=s("5bb6"),n=s.n(a);n.a},a176:function(t,e,s){},a5f9:function(t,e,s){},ba83:function(t,e,s){"use strict";var a=s("e81b"),n=s.n(a);n.a},c9bd:function(t,e,s){},d4fc:function(t,e,s){},d91a:function(t,e,s){},e773:function(t,e,s){},e7a7:function(t,e,s){},e81b:function(t,e,s){},fcec:function(t,e,s){},ff4e:function(t,e,s){}});
//# sourceMappingURL=app.342be043.js.map