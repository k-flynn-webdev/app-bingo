(function(t){function e(e){for(var a,o,r=e[0],l=e[1],c=e[2],d=0,m=[];d<r.length;d++)o=r[d],n[o]&&m.push(n[o][0]),n[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);u&&u(e);while(m.length)m.shift()();return i.push.apply(i,c||[]),s()}function s(){for(var t,e=0;e<i.length;e++){for(var s=i[e],a=!0,r=1;r<s.length;r++){var l=s[r];0!==n[l]&&(a=!1)}a&&(i.splice(e--,1),t=o(o.s=s[0]))}return t}var a={},n={app:0},i=[];function o(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=a,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(s,a,function(e){return t[e]}.bind(null,a));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=l;i.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"143e":function(t,e,s){},"1cf3":function(t,e,s){"use strict";var a=s("35cd"),n=s.n(a);n.a},"1eab":function(t,e,s){"use strict";var a=s("2b10"),n=s.n(a);n.a},"23a4":function(t,e,s){},"255a":function(t,e,s){"use strict";var a=s("f6cb"),n=s.n(a);n.a},"268b":function(t,e,s){},"2aab":function(t,e,s){"use strict";var a=s("a176"),n=s.n(a);n.a},"2b10":function(t,e,s){},"2dd7":function(t,e,s){},"35a5":function(t,e,s){"use strict";var a=s("c9bd"),n=s.n(a);n.a},"35cd":function(t,e,s){},"3e3b":function(t,e,s){"use strict";var a=s("fcec"),n=s.n(a);n.a},4678:function(t,e,s){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function n(t){var e=i(t);return s(e)}function i(t){var e=a[t];if(!(e+1)){var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}return e}n.keys=function(){return Object.keys(a)},n.resolve=i,t.exports=n,n.id="4678"},"47eb":function(t,e,s){"use strict";var a=s("d123"),n=s.n(a);n.a},5220:function(t,e,s){},5592:function(t,e,s){"use strict";var a=s("d91a"),n=s.n(a);n.a},5681:function(t,e,s){"use strict";var a=s("a5f9"),n=s.n(a);n.a},"568f":function(t,e,s){"use strict";var a=s("ff7b"),n=s.n(a);n.a},"56d7":function(t,e,s){"use strict";s.r(e);var a=s("2b0e"),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("c-navbar",[[s("router-link",{staticClass:"link title text-light colour-on-hover colour-on-focus",attrs:{to:"/"}},[t._v("Home")])],s("router-link",{staticClass:"link title text-light colour-on-hover colour-on-focus",attrs:{to:"/board/create"}},[t._v("Create")]),s("template",{slot:"active"},[s("router-link",{staticClass:"link title text-light colour-on-hover colour-on-focus",attrs:{to:"/logout"}},[t._v("Logout")]),s("router-link",{staticClass:"link title text-light colour-on-hover colour-on-focus",attrs:{to:"/account"}},[t._v("Account")]),s("router-link",{staticClass:"link title text-light user colour-on-hover colour-on-focus",attrs:{to:"/admin/request"}},[t._v("\n\t\t\t\t\tAdminRequest\n\t\t\t")]),s("router-link",{staticClass:"link title text-light admin colour-on-hover colour-on-focus",attrs:{to:"/admin"}},[t._v("\n\t\t\t\t\tAdminBoard\n\t\t\t\t")])],1),s("template",{slot:"none-active"},[s("router-link",{staticClass:"link title text-light colour-on-hover colour-on-focus",attrs:{to:"/login"}},[t._v("Login")])],1)],2),s("router-view"),s("c-footer")],1)},i=[],o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("nav",{attrs:{id:"navbar"}},[s("div",{staticClass:"toggle hover-scale",class:t.is_open?"cross":"bars",attrs:{tabindex:"1"},on:{click:t.on_click}},[s("span",{staticClass:"span-1"}),s("span",{staticClass:"span-2"}),s("span",{staticClass:"span-3"})]),s("div",{staticClass:"bar-fill"}),s("div",{staticClass:"content",class:{"is-active":t.is_open,"is-admin":t.is_admin,"is-user":t.is_user},on:{click:t.on_click}},[t._t("default"),t.is_active?t._t("active",[t._v("\n\t\t\t\t\n\t\t\t\t"+t._s(t.user)+"\n\n\t\t\t")]):t._t("none-active",[t._v("\n\t\t\t\t\n\t\t\t\tnone active\n\t\t\t\t\n\t\t\t")])],2)])},r=[],l={name:"Navbar",data(){return{is_open:!1}},computed:{is_active:function(){return this.$store.getters["user/get_active"]},user:function(){return this.$store.getters["user/get_user"]},is_user:function(){return"user"===this.user.role},is_admin:function(){return"admin"===this.user.role}},methods:{on_click:function(){this.is_open=!this.is_open}},components:{}},c=l,u=(s("59c9"),s("ba83"),s("2877")),d=Object(u["a"])(c,o,r,!1,null,"4ff5dfec",null);d.options.__file="c_navbar.vue";var m=d.exports,h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"parent"},[s("footer",{ref:"footer"},[s("div",{staticClass:"dark footer"},[s("div",{staticClass:"center-auto-h width-85"},[s("div",{staticClass:"content text-center"},[s("p",{staticClass:"text-light"},[t._v("Made with \n\n\t\t\t\t\t\t"),s("span",[s("svg",{staticStyle:{"fill-rule":"evenodd","clip-rule":"evenodd","stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":"1.5"},attrs:{height:"100%",viewBox:"0 0 907 828",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","xml:space":"preserve","xmlns:serif":"http://www.serif.com/"}},[s("path",{staticStyle:{fill:"none","stroke-width":"100px"},attrs:{d:"M730.084,312.85c4.226,113.133 -40.828,236.381 -79.883,320.702c-29.137,63.033 -92.165,103.467 -161.607,103.675c-58.148,0.184 -129.832,0.398 -188.066,0.573c-68.886,0.206 -131.752,-39.215 -161.569,-101.314c-43.597,-90.793 -96.522,-224.663 -88.059,-325.713"}}),s("path",{staticStyle:{fill:"none","stroke-width":"75px"},attrs:{d:"M83.339,352.99l634.919,-1.948"}}),s("path",{staticStyle:{fill:"none","stroke-width":"75px"},attrs:{d:"M244.11,87.064l-54.656,150.983"}}),s("path",{staticStyle:{fill:"none","stroke-width":"75px"},attrs:{d:"M463.777,37.5l-79.086,206.267"}}),s("path",{staticStyle:{fill:"none","stroke-width":"75px"},attrs:{d:"M618.892,124.663l-49.707,118.199"}}),s("path",{staticStyle:{fill:"none","stroke-width":"75px"},attrs:{d:"M730.433,429.13l137.329,0c0,0 27.947,188.444 -226.001,233.406"}}),s("path",{staticStyle:{fill:"none","stroke-width":"50px"},attrs:{d:"M103.65,802.194l606.437,0"}})])]),t._v(" \n\t\t\t\t\t\tby \n\n\t\t\t\t\t\t"),s("a",{attrs:{href:"https://github.com/k-flynn-webdev"}},[t._v(" k-flynn-webdev ")])])])])])])])},p=[],f={name:"cFooter",mounted(){document.body.appendChild(this.$refs.footer)},beforeDestroy(){document.body.removeChild(this.$refs.footer),this.$refs.parent.appendChild(this.$refs.footer)}},_=f,g=(s("5592"),Object(u["a"])(_,h,p,!1,null,"1c73e935",null));g.options.__file="c_footer.vue";var b=g.exports;s("23a4"),s("143e"),s("ff4e"),s("a093");var v={name:"App",created(){this.$store.dispatch("user/init",this.$request.get_SecureKeyFile)},computed:{},methods:{},components:{"c-navbar":m,"c-footer":b}},y=v,w=Object(u["a"])(y,n,i,!1,null,null,null);w.options.__file="App.vue";var x=w.exports,$=s("8c4f"),C=s("2f62");function k(t){if(!1===t||"false"===t)return!1;let e={},s=[];return s=t.split("."),e.raw=t,e.payload=JSON.parse(window.atob(s[1])),e.payload}function j(){let t=window.localStorage.getItem("tokenStringKube");return null===t?"":t}function S(t){window.localStorage.setItem("tokenStringKube",t)}function E(){window.localStorage.removeItem("tokenStringKube")}var O={namespaced:!0,state:{requestObj:Function,session:{active:Boolean,user:{id:String,name:String,email:String,role:String},token:"token"}},getters:{get_active:function(t){return t.session.active},get_user:function(t){return t.session.user},get_token:function(t){return t.session.token}},mutations:{requestObj:function(t,e){t.requestObj=e},active:function(t,e){t.session.active=e},user:function(t,e){t.session.user.id=e.id,t.session.user.name=e.name,t.session.user.email=e.email,t.session.user.role=e.role},token:function(t,e){t.session.token=e,S(e),t.requestObj()}},actions:{init:function(t,e){t.commit("requestObj",e);let s=j();s.length<5?t.dispatch("logout_success"):t.dispatch("login_success",s)},login_success:function(t,e){let s=k(e);t.commit("active",!0),t.commit("user",s),t.commit("token",e)},logout_success:function(t){let e={id:"",name:"",email:"",role:""};t.commit("active",!1),t.commit("user",e),t.commit("token",""),E()}}},T={namespaced:!0,state:{game:{board:{url:"",data:{name:"Play Bingo!",words:[],game:{win:0,display:0}}},instance:{url:"",data:{board:"",players:[],game:{win:0,ahead:"",winner:""}},polled:0},player:{url:"",data:{name:"",score:0,words:[]},method:"POST",joined:!1}}},getters:{get_board:function(t){return t.game.board},get_instance:function(t){return t.game.instance},get_players:function(t){return t.game.instance.players},get_player:function(t){return t.game.player},get_words:function(t){return t.game.player.data.words},get_score:function(t){return t.game.player.data.score}},mutations:{board:function(t,e){void 0!==e.url&&(t.game.board.url=e.url),void 0!==e.data&&(t.game.board.data.name=e.data.name,t.game.board.data.game.win=e.data.game.win,t.game.board.data.game.display=e.data.game.display,t.game.board.data.words=e.data.words)},instance:function(t,e){void 0!==e.url&&(t.game.instance.url=e.url),void 0!==e.data&&(t.game.instance.data.board=e.data.board,t.game.instance.data.players=e.data.players,t.game.instance.data.game.win=e.data.game.win,t.game.instance.data.game.ahead=e.data.game.ahead,t.game.instance.data.game.winner=e.data.game.winner),void 0!==e.polled&&(t.game.instance.polled=e.polled)},player:function(t,e){void 0!==e.url&&e.url.length>1&&(t.game.player.url=e.url),void 0!==e.data&&void 0!==e.data.name&&e.data.name.length>1&&(t.game.player.data.name=e.data.name),void 0!==e.method&&(t.game.player.method=e.method),void 0!==e.joined&&(t.game.player.joined=e.joined)},words:function(t,e){t.game.player.data.words=e},score:function(t,e){t.game.player.data.score=e}},actions:{set_instance:function(t,e){t.commit("instance",e)},set_board:function(t,e){t.commit("board",e)},set_player:function(t,e){t.commit("player",e)},set_words:function(t,e){t.commit("words",e)},set_score:function(t,e){t.commit("score",e)},word_add:function(t,e){let s=t.getters.get_words,a=P(e,s);a<0&&s.push(e),t.commit("words",s)},word_remove:function(t,e){let s=t.getters.get_words,a=P(e,s);a>=0&&s.splice(a,1),t.commit("words",s)},score_add:function(t){let e=t.getters.get_score+1;t.commit("score",e)},score_remove:function(t){let e=t.getters.get_score-1;t.commit("score",e)},reset_player:function(t){setTimeout(function(){t.commit("words",[]),t.commit("score",0)},100)},exit:function(t){t.commit("board",D),t.commit("instance",q),t.commit("player",B),t.commit("words",[]),t.commit("score",0)}}};function P(t,e){for(let s=0;s<e.length;s++)if(e[s]===t)return s;return-1}const D={url:"",data:{name:"Play Bingo!",words:[],game:{display:0,win:0}}},q={url:"",data:{board:"",players:[],game:{win:0,ahead:"",winner:""},polled:0}},B={data:{score:0,words:[]},method:"POST",joined:!1};var N={namespaced:!0,state:{player:{id:String,name:String}},getters:{get_id:function(t){return t.player.id},get_name:function(t){return t.player.name}},mutations:{id:function(t,e){t.player.id=e},name:function(t,e){t.player.name=e}},actions:{set_player:function(t,e){t.commit("id",e.id),t.commit("name",e.name)},remove_player:function(t){t.commit("id",""),t.commit("name","")}}};a["a"].use(C["a"]);var A=new C["a"].Store({state:{counter:0},mutations:{increment:function(t,e){t.counter+=e},decrement:function(t,e){t.counter-=e}},getters:{count:function(t){return t.counter}},actions:{},modules:{user:O,game:T,player:N}}),I=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},L=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"center-auto-h width-90"},[s("h1",{staticClass:"heading"},[t._v("Basic Vue site (client and server).")]),s("p",{staticClass:"title"},[t._v("A simple vue package with the goal of being secure via JsonWebTokens.")]),s("br"),s("b",{staticClass:"text text-bold"},[t._v("Frameworks:")]),s("ul",{staticClass:"text text-small",staticStyle:{"margin-left":"2rem"}},[s("li",[t._v("Vuejs and VueX store.")]),s("li",[t._v("Node and Express for the server.")]),s("li",[t._v("Mongodb for the database.")])]),s("b",{staticClass:"text text-bold"},[t._v("Front Features:")]),s("ul",{staticClass:"text text-small",staticStyle:{"margin-left":"2rem"}},[s("li",[t._v("User login/register/logout page.")]),s("li",[t._v("User acount/edit/remove page.")]),s("li",[t._v("Admin request form.")]),s("li",[t._v("Admin dashboard.")]),s("li",[t._v("View last 30 days of user acccount activities.")]),s("li",[t._v("View/edit/remove all users.")]),s("li",[t._v("Review/reset all database items/collections.")]),s("li",[t._v("User secure token handled via VueX locally.")])]),s("b",{staticClass:"text text-bold"},[t._v("Server Features:")]),s("ul",{staticClass:"text text-small",staticStyle:{"margin-left":"2rem"}},[s("li",[t._v("Input validation on all form data.")]),s("li",[t._v("Request rate limiting.")]),s("li",[t._v("User/Admin validation on all routes via secure header/token.")]),s("li",[t._v("Token blacklisting.")]),s("li",[t._v("Unit test for all user interactions.")])]),s("p")])}],R={name:"home",components:{}},z=R,M=Object(u["a"])(z,I,L,!1,null,null,null);M.options.__file="Index.vue";var U=M.exports,J=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("c-panel",{staticClass:"flex-only-on-large"},[s("div",{attrs:{slot:"header"},slot:"header"},[t._v("\n\t\tAccount Register\n\t")]),s("form",{staticClass:"form",attrs:{action:"/api/account/create",method:"POST"},on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[s("c-account-input",{attrs:{Input:t.AccountInfo}}),s("c-button",{attrs:{progress:t.progress}}),s("c-message",{ref:"messageBtn"})],1),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("div",[s("p",[t._v("\n\t\t\t\tAlready have an account, \n\t\t\t\t"),s("router-link",{attrs:{to:"/login"}},[t._v("login?")])],1)]),s("div",[s("p",[t._v("\n\t\t\t\tTry a\n\t\t\t\t"),s("router-link",{attrs:{to:"/demo"}},[t._v("demo?")])],1)])])])},F=[],G=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"account-input"},[t.NameShow?s("div",{staticClass:"field"},[s("p",{staticClass:"text label"},[t._v("Name:")]),s("input",{staticClass:"text",attrs:{type:"string",name:"name",placeholder:"Name",required:t.Input.Name.isRequired},domProps:{value:t.Input.Name.value}})]):t._e(),t.EmailShow?s("div",{staticClass:"field"},[s("p",{staticClass:"text label"},[t._v("Email:")]),s("input",{staticClass:"text",attrs:{type:"email",name:"email",placeholder:"Email",required:t.Input.Email.isRequired},domProps:{value:t.Input.Email.value}})]):t._e(),t.PasswordShow?s("div",{staticClass:"field"},[s("p",{staticClass:"text label"},[t._v("Password:")]),s("input",{staticClass:"text",attrs:{type:"password",name:"password",placeholder:"Password",required:t.Input.Password.isRequired},domProps:{value:t.Input.Password.value}})]):t._e()])},K=[],H={name:"AccountInput",props:{Input:{Name:Object,Email:Object,Password:Object}},computed:{NameShow:function(){return!(void 0===this.Input.Name||!this.Input.Name.show)},EmailShow:function(){return!(void 0===this.Input.Email||!this.Input.Email.show)},PasswordShow:function(){return!(void 0===this.Input.Password||!this.Input.Password.show)}}},V=H,W=(s("2aab"),Object(u["a"])(V,G,K,!1,null,null,null));W.options.__file="c_account_input.vue";var X=W.exports,Y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"button fade-in",class:{"is-loading":t.waiting,"is-success":t.success,"is-error":t.error},on:{click:t.clicked}},[s("p",{staticClass:"text text-light"},[t._t("default",[t._v(" \n\t\t\t \tSubmit \n\t\t\t")])],2),s("span",{staticClass:"loading"}),s("span",{staticClass:"loading"}),s("span",{staticClass:"loading"})])},Q=[],Z={name:"cButton",props:{onClick:Function,progress:Object},computed:{success:function(){return void 0!==this.progress&&void 0!==this.progress.success&&this.progress.success},waiting:function(){return void 0!==this.progress&&void 0!==this.progress.waiting&&this.progress.waiting},error:function(){return void 0!==this.progress&&void 0!==this.progress.error&&this.progress.error}},methods:{clicked:function(){void 0!==this.onClick&&this.onClick()}}},tt=Z,et=(s("98bc"),Object(u["a"])(tt,Y,Q,!1,null,null,null));et.options.__file="c_button.vue";var st=et.exports,at=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"panel width-90 center-auto-h shadow"},[s("header",{class:{"no-split":t.no_split}},[s("p",{staticClass:"title text-uppercase text-small"},[t._t("header")],2),s("p",{staticClass:"title text-small"},[t._t("header-no-cap")],2),s("div",{staticClass:"options flex-row flex-row-end"},[t._t("options")],2)]),s("main",[t._t("default")],2),t._t("no-margin"),s("footer",[s("p",{staticClass:"text"},[t._t("footer")],2)])],2)},nt=[];s("2dd7");var it={name:"cPanel",props:{no_split:Boolean}},ot=it,rt=(s("5f9b"),Object(u["a"])(ot,at,nt,!1,null,null,null));rt.options.__file="c_panel.vue";var lt=rt.exports,ct=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"message"},[s("p",{class:t.get_class},[t._v(" "+t._s(t.get_message)+" ")])])},ut=[];let dt=null,mt=null;var ht={name:"cMessage",data(){return{obj:{class:"",message:""},duration_sec:4}},props:{},computed:{get_class:function(){return this.obj.class},get_message:function(){return this.obj.message}},methods:{message_set:function(t){this.obj.class=t.class,this.obj.message=t.message,this.message_reset()},message_reset:function(){let t=this;dt=setTimeout(function(){t.obj.class=""},1e3*(t.duration_sec-1)),mt=setTimeout(function(){t.obj.message=""},1e3*t.duration_sec)}},mounted(){this.$on("message",this.message_set)},beforeDestroy(){clearTimeout(dt),clearTimeout(mt),this.$off("message",this.message_set)},components:{}},pt=ht,ft=(s("255a"),Object(u["a"])(pt,ct,ut,!1,null,"5d7d0b5b",null));ft.options.__file="c_message.vue";var _t=ft.exports,gt={name:"Register",data(){return{progress:{waiting:!1,success:!1,error:!1},AccountInfo:{Name:{show:!0,isRequired:!0,value:""},Email:{show:!0,isRequired:!0,value:""},Password:{show:!0,isRequired:!0,value:""}}}},created(){},methods:{button_reset:function(){let t=this;setTimeout(function(){t.progress.waiting=!1,t.progress.success=!1,t.progress.error=!1},1e3)},onSubmit:function(t){this.progress.waiting=!0;let e=this;this.$request.request_url_form(t,function(t,s){if(e.button_reset(),t)return e.progress.error=!0,void e.$refs.messageBtn.$emit("message",{class:"error text-negative",message:t.message});e.progress.success=!0,e.$refs.messageBtn.$emit("message",{class:"success text-positive",message:s.message}),setTimeout(function(){e.$store.dispatch("user/login_success",s.token),e.$router.push("/")},1e3)})}},components:{"c-account-input":X,"c-button":st,"c-panel":lt,"c-message":_t}},bt=gt,vt=Object(u["a"])(bt,J,F,!1,null,null,null);vt.options.__file="Register.vue";var yt=vt.exports,wt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("c-panel",[s("div",{attrs:{slot:"header"},slot:"header"},[t._v("\n\t\tAccount Login\n\t")]),s("form",{staticClass:"form",attrs:{action:"/api/account/login",method:"POST"},on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[s("c-account-input",{attrs:{Input:t.AccountInfo}}),s("c-button",{attrs:{progress:t.progress}})],1),s("c-message",{ref:"messageBtn"}),s("div",{attrs:{slot:"footer"},slot:"footer"},[t._v("\n\t\tDont have an account, why not \n\t\t"),s("router-link",{attrs:{to:"/register"}},[t._v("register?")])],1)],1)},xt=[],$t={name:"Login",data(){return{progress:{waiting:!1,success:!1,error:!1},AccountInfo:{Name:{show:!1,isRequired:!1,value:""},Email:{show:!0,isRequired:!0,value:""},Password:{show:!0,isRequired:!0,value:""}}}},created(){},methods:{button_reset:function(){let t=this;setTimeout(function(){t.progress.waiting=!1,t.progress.success=!1,t.progress.error=!1},1e3)},onSubmit:function(t){this.progress.waiting=!0;let e=this;this.$request.request_url_form(t,function(t,s){if(e.button_reset(),t)return e.progress.error=!0,void e.$refs.messageBtn.$emit("message",{class:"error text-negative",message:t.message});e.progress.success=!0,e.$refs.messageBtn.$emit("message",{class:"success text-positive",message:s.message}),setTimeout(function(){e.$store.dispatch("user/login_success",s.token),e.$router.push("/")},1e3)})}},components:{"c-account-input":X,"c-button":st,"c-message":_t,"c-panel":lt}},Ct=$t,kt=Object(u["a"])(Ct,wt,xt,!1,null,null,null);kt.options.__file="Login.vue";var jt=kt.exports,St=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("c-panel",[s("div",{attrs:{slot:"header"},slot:"header"},[t._v("\n\t\tAccount Logout\n\t")]),s("form",{staticClass:"form",attrs:{action:"/api/account/logout",method:"POST"},on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[s("c-button",{attrs:{progress:t.progress}}),s("c-message",{ref:"messageBtn"})],1)])},Et=[],Ot={name:"Logout",data(){return{progress:{waiting:!1,success:!1,error:!1}}},created(){},methods:{button_reset:function(){let t=this;setTimeout(function(){t.progress.waiting=!1,t.progress.success=!1,t.progress.error=!1},1e3)},onSubmit:function(t){this.progress.waiting=!0;let e=this;this.$request.request_url_form(t,function(t,s){if(e.button_reset(),t)return e.progress.error=!0,e.$refs.messageBtn.$emit("message",{class:"error text-negative",message:t.message}),void e.logout();e.progress.success=!0,e.$refs.messageBtn.$emit("message",{class:"success text-positive",message:s.message}),e.logout()})},logout:function(){let t=this;setTimeout(function(){t.$store.dispatch("user/logout_success",""),t.$router.push("/")},1e3)}},components:{"c-button":st,"c-panel":lt,"c-message":_t}},Tt=Ot,Pt=Object(u["a"])(Tt,St,Et,!1,null,null,null);Pt.options.__file="Logout.vue";var Dt=Pt.exports,qt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex-only-on-large"},[t.isDeleting?s("c-popup",{attrs:{onClick:t.hide_delete}},[s("div",{attrs:{slot:"header"},slot:"header"},[t._v("\n\t\t\tDelete Account\n\t\t")]),s("p",{staticClass:"text"},[t._v(" Are you sure you want to delete ")]),s("p",{staticClass:"text"},[t._v(" this account? ")]),s("br"),s("div",{staticClass:"flex-row flex-row-between"},[s("c-button",{attrs:{onClick:t.hide_delete,type:"button"}},[t._v("\n\t\t\t\tClose\n\t\t\t")]),s("c-button",{staticClass:"colour-negative-bg",attrs:{type:"button",onClick:t.onSubmit_delete}},[t._v("\n\t\t\t\tDelete\n\t\t\t")])],1),s("c-message",{ref:"messageBtnDel"})],1):t._e(),s("c-panel",[s("div",{attrs:{slot:"header"},slot:"header"},[t._v("\n\t\t\tAccount\n\t\t")]),s("form",{staticClass:"form",attrs:{action:"/api/account/?_method=PUT",method:"POST"},on:{submit:function(e){return e.preventDefault(),t.onSubmit_update(e)}}},[t.isEditing?s("c-account-input",{attrs:{Input:t.account}}):s("c-account-text",{attrs:{Input:t.account}}),s("div",{staticClass:"flex-row flex-row-between",class:{"is-edit":!t.isEditing}},[s("c-button",{staticClass:"colour-yellow",attrs:{onClick:t.edit_switch,type:"button"}},[t._v("\n\t\t\t\t\t"+t._s(t.button_undo_label)+"\n\t\t\t\t")]),s("c-button",{directives:[{name:"show",rawName:"v-show",value:t.isEditing,expression:"isEditing"}],staticClass:"colour-positive-bg",attrs:{type:"submit",progress:t.progress_update}},[t._v("\n\t\t\t\t\tUpdate \n\t\t\t\t")]),s("c-button",{directives:[{name:"show",rawName:"v-show",value:t.isEditing,expression:"isEditing"}],staticClass:"colour-negative-bg",attrs:{type:"button",onClick:t.popup_delete,progress:t.progress_delete}},[t._v("\n\t\t\t\t\tDelete\n\t\t\t\t")])],1),s("c-message",{ref:"messageBtn"})],1)])],1)},Bt=[],Nt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"account-text"},[t.NameShow?s("div",{staticClass:"field"},[s("p",{staticClass:"text label"},[t._v("Name:")]),s("p",{staticClass:"text account-text-item"},[t._v("\n\t\t\t"+t._s(t.Input.Name.value)+"\n\t\t")])]):t._e(),t.EmailShow?s("div",{staticClass:"field"},[s("p",{staticClass:"text label"},[t._v("Email:")]),s("p",{staticClass:"text account-text-item"},[t._v("\n\t\t\t"+t._s(t.Input.Email.value)+"\n\t\t")])]):t._e(),t.PasswordShow?s("div",{staticClass:"field"},[s("p",{staticClass:"text label"},[t._v("Password:")]),s("p",{staticClass:"text account-text-item"},[t._v("\n\t\t\t"+t._s(t.getPassword)+"\n\t\t")])]):t._e()])},At=[],It={name:"AccountText",props:{Input:{Name:Object,Email:Object,Password:Object}},computed:{NameShow:function(){return!(void 0===this.Input.Name||!this.Input.Name.show)},EmailShow:function(){return!(void 0===this.Input.Email||!this.Input.Email.show)},PasswordShow:function(){return!(void 0===this.Input.Password||!this.Input.Password.show)},getPassword:function(){return"hidden"}}},Lt=It,Rt=(s("5681"),Object(u["a"])(Lt,Nt,At,!1,null,"d1c0f190",null));Rt.options.__file="c_account_text.vue";var zt=Rt.exports,Mt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"popup",staticClass:"test popup-fill",staticStyle:{"z-index":"50"}},[s("div",{staticClass:"fill-all shade",on:{click:t.clicked}}),s("div",{staticClass:"panel center-auto-h width-95 shadow",staticStyle:{position:"relative","z-index":"10"}},[s("header",[s("p",{staticClass:"title text-uppercase text-med text-small"},[t._t("header")],2),t._t("options")],2),s("main",[t._t("default"),t._t("no-margin")],2),s("footer",[s("p",{staticClass:"text"},[t._t("footer")],2)])])])},Ut=[];s("2dd7");var Jt={name:"cPopUp",data(){return{show:!1}},props:{onClick:Function},methods:{clicked:function(){void 0!==this.onClick&&this.onClick()}},mounted(){document.body.appendChild(this.$refs.popup)},components:{}},Ft=Jt,Gt=(s("35a5"),Object(u["a"])(Ft,Mt,Ut,!1,null,"696cbd22",null));Gt.options.__file="c_popup.vue";var Kt=Gt.exports;const Ht={methods:{expired_token_check:function(t){if(401===t.status&&"jwt expired"===t.message){let t=this;return setTimeout(function(){t.$router.push("/login")},2e3),!0}return!1}}};var Vt={name:"Account",mixins:[Ht],data(){return{isEditing:!1,isDeleting:!1,progress_update:{waiting:!1,success:!1,error:!1},progress_delete:{waiting:!1,success:!1,error:!1},account:{Name:{show:!0,isRequired:!0,value:""},Email:{show:!0,isRequired:!0,value:""},Password:{show:!0,isRequired:!0,value:""}}}},computed:{button_undo_label:function(){return this.isEditing?"undo":"edit"}},created(){},mounted(){this.get_user()},methods:{popup_delete:function(){this.isDeleting=!0},hide_delete:function(){this.isDeleting=!1},get_user:function(){let t=this.$store.getters["user/get_user"];this.account.Name.value=t.name,this.account.Email.value=t.email},edit_switch:function(){this.isEditing=!this.isEditing},button_reset_update:function(){let t=this;setTimeout(function(){t.progress_update.waiting=!1,t.progress_update.success=!1,t.progress_update.error=!1},1e3)},button_reset_delete:function(){let t=this;setTimeout(function(){t.progress_delete.waiting=!1,t.progress_delete.success=!1,t.progress_delete.error=!1},1e3)},onSubmit_update:function(t){let e=this;this.progress_update.waiting=!0,this.$request.request_url_form(t,function(t,s){if(e.button_reset_update(),t)return e.expired_token_check(t),e.progress_update.error=!0,void e.$refs.messageBtn.$emit("message",{class:"error text-negative",message:t.message});e.progress_update.success=!0,e.$refs.messageBtn.$emit("message",{class:"success text-positive",message:s.message}),setTimeout(function(){e.$store.dispatch("user/login_success",s.token),e.$router.push("/")},1e3)})},onSubmit_delete:function(t){let e=this,s={url:"/api/account/?_method=DELETE",method:"POST",body:""};this.progress_delete.waiting=!0,this.$request.request_url(s,function(t,s){if(t)return e.expired_token_check(t)&&setTimeout(function(){e.hide_delete()},1400),e.progress_delete.error=!0,void e.$refs.messageBtnDel.$emit("message",{class:"error text-negative",message:t.message});e.progress_delete.success=!0,e.$refs.messageBtnDel.$emit("message",{class:"success text-positive",message:s.message}),e.button_reset_delete(),setTimeout(function(){e.hide_delete()},1400),setTimeout(function(){e.$store.dispatch("user/logout_success"),e.$router.push("/")},1900)})}},components:{"c-button":st,"c-panel":lt,"c-popup":Kt,"c-account-input":X,"c-account-text":zt,"c-message":_t}},Wt=Vt,Xt=Object(u["a"])(Wt,qt,Bt,!1,null,null,null);Xt.options.__file="Account.vue";var Yt=Xt.exports,Qt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h1",{staticClass:"title text-center text-light",staticStyle:{"margin-bottom":"1rem"}},[t._v("Dashboard:")]),s("div",{staticClass:"admin flex-only-on-large"},[s("c-admin-edit"),s("c-admin-users-graph"),s("c-admin-users-month"),s("c-admin-users-all"),s("c-admin-db")],1)])},Zt=[],te=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("c-panel",{staticClass:"admin order"},[s("div",{attrs:{slot:"header-no-cap"},slot:"header-no-cap"},[s("span",{staticClass:"text-uppercase"},[t._v(" Database ")])]),s("div",{staticClass:"account-text"},[s("table",{staticStyle:{margin:"0 !important",padding:"0 !important"},attrs:{slot:"no-margin"},slot:"no-margin"},[s("thead",{staticClass:"head"},[s("tr",{staticClass:"row"},[s("th",{staticClass:"text text-blur colour-text-dark"},[t._v("Name")]),s("th",{staticClass:"text text-blur colour-text-dark"},[t._v("Count")]),s("th",{staticClass:"text text-blur colour-text-dark"},[t._v("Size")]),s("th",{staticClass:"text text-blur colour-text-dark"})])]),s("tbody",t._l(t.data,function(e){return s("tr",{key:e.name,staticClass:"row"},[s("td",{staticClass:"text"},[s("p",[t._v(" "+t._s(e.name))])]),s("td",{staticClass:"text"},[s("p",[t._v(" "+t._s(e.count))])]),s("td",{staticClass:"text"},[s("p",[t._v(" \n\t\t\t\t\t\t\t"+t._s((e.storageSize/1e3).toFixed(2))+" KB\n\t\t\t\t\t\t")])]),t.all_button(e.name)?s("td",{staticClass:"text"},[s("button",{staticClass:"button text-light",on:{click:function(s){t.reset_db(e.name)}}},[t._v("\n\t\t\t\t\t\t\t\treset\n\t\t\t\t\t\t")])]):t._e()])}),0)])]),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("c-message",{ref:"messageBtn"})],1)])},ee=[],se={name:"cAdminDB",mixins:[Ht],data(){return{data:Array}},mounted(){this.get_db_stats()},methods:{all_button:function(t){return t.toLowerCase()!=="All".toLowerCase()},reset_db:function(t){let e=this,s={url:"/api/admin/reset/"+t.toLowerCase(),method:"POST",body:""};this.$request.request_url(s,function(t,s){if(t)return e.$refs.messageBtn.$emit("message",{class:"error text-negative",message:t.message}),void e.expired_token_check(t);e.$refs.messageBtn.$emit("message",{class:"success text-positive",message:s.message}),setTimeout(function(){e.get_db_stats()},1e3)})},get_db_stats:function(){let t=this,e={url:"/api/admin/stats",method:"POST",body:""};this.$request.request_url(e,function(e,s){if(e)return t.expired_token_check(e),void t.$refs.messageBtn.$emit("message",{class:"error text-negative",message:e.message});t.data=s.data})}},components:{"c-button":st,"c-panel":lt,"c-message":_t}},ae=se,ne=(s("3e3b"),Object(u["a"])(ae,te,ee,!1,null,"1cfc48e1",null));ne.options.__file="c_admin_db.vue";var ie=ne.exports,oe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.show_delete?s("c-popup",{staticClass:"admin",staticStyle:{"z-index":"100"},attrs:{onClick:t.hide_delete}},[s("div",{attrs:{slot:"header"},slot:"header"},[t._v("\n\t\t\tDelete user\n\t\t")]),s("p",{staticClass:"text"},[t._v(" Are you sure you want to delete ")]),s("p",{staticClass:"text"},[t._v(" this account? ")]),s("br"),s("div",{staticClass:"flex-row flex-row-between"},[s("c-button",{attrs:{onClick:t.hide_delete,type:"button"}},[t._v("\n\t\t\t\tClose\n\t\t\t")]),s("c-button",{staticClass:"colour-negative-bg",attrs:{type:"button",onClick:t.onSubmit_delete}},[t._v("\n\t\t\t\tDelete\n\t\t\t")])],1),s("c-message",{ref:"messageBtnDel"})],1):t._e(),t.show_edit?s("c-popup",{staticClass:"admin",attrs:{onClick:t.hide_edit}},[s("div",{attrs:{slot:"header"},slot:"header"},[t._v("\n\t\t\tEdit user\n\t\t")]),s("div",{staticStyle:{margin:"0 !important",padding:"0 !important"},attrs:{slot:"no-margin"},slot:"no-margin"},[s("form",{staticClass:"form",attrs:{action:t.form_url,method:"POST"},on:{submit:function(e){return e.preventDefault(),t.onSubmit_update(e)}}},[s("div",{staticClass:"field"},[s("p",{staticClass:"text label"},[t._v("Name:")]),s("input",{staticClass:"text",attrs:{type:"string",name:"name",placeholder:"Name"},domProps:{value:t.name}})]),s("div",{staticClass:"field"},[s("p",{staticClass:"text label"},[t._v("Email:")]),s("input",{staticClass:"text",attrs:{type:"email",name:"email",placeholder:"Email"},domProps:{value:t.email}})]),s("div",{staticClass:"field"},[s("p",{staticClass:"text label"},[t._v("Role:")]),s("input",{staticClass:"text",attrs:{type:"string",name:"role",placeholder:"Role"},domProps:{value:t.role}})]),s("div",{staticClass:"field"},[s("p",{staticClass:"text label"},[t._v("Created:")]),s("input",{staticClass:"text",attrs:{type:"date",name:"created",placeholder:"Role"},domProps:{value:t.created}})]),s("div",{staticClass:"field"},[s("p",{staticClass:"text label"},[t._v("Updated:")]),s("input",{staticClass:"text",attrs:{type:"date",name:"updated",placeholder:"Role"},domProps:{value:t.updated}})]),s("div",{staticClass:"field"},[s("p",{staticClass:"text label"},[t._v("Login:")]),s("input",{staticClass:"text",attrs:{type:"date",name:"login",placeholder:"Role"},domProps:{value:t.login}})]),s("div",{staticClass:"field"},[s("p",{staticClass:"text label"},[t._v("ID:")]),s("input",{staticClass:"text",attrs:{type:"string",name:"id",placeholder:"ID"},domProps:{value:t.id_user}})]),s("div",{staticClass:"flex-row flex-row-between"},[s("c-button",{staticClass:"colour-positive-bg",attrs:{type:"submit",progress:t.progress_update}},[t._v("\n\t\t\t\t\t\tUpdate \n\t\t\t\t\t")]),s("c-button",{staticClass:"colour-negative-bg",attrs:{type:"button",onClick:t.popup_delete,progress:t.progress_delete}},[t._v("\n\t\t\t\t\t\tDelete\n\t\t\t\t\t")])],1),s("c-message",{ref:"messageBtn"})],1)]),s("div",{attrs:{slot:"footer"},slot:"footer"})]):t._e()],1)},re=[],le={name:"cAdminEdit",mixins:[Ht],data(){return{data:{id:"",name:"",email:"",role:"",created:"",updated:"",login:""},show_edit:!1,progress_update:{waiting:!1,success:!1,error:!1},show_delete:!1,progress_delete:{waiting:!1,success:!1,error:!1}}},mounted(){this.$root.$on("userAdminSelect",this.show_user)},computed:{name:function(){return this.data.name},email:function(){return this.data.email},role:function(){return this.data.role},created:function(){return new Date(this.data.created).toISOString().split("T")[0]},updated:function(){return new Date(this.data.updated).toISOString().split("T")[0]},login:function(){return new Date(this.data.login).toISOString().split("T")[0]},id_user:function(){return this.data.id},form_url:function(){return"/api/admin/user/"+this.id_user+"?_method=PUT"}},methods:{popup_edit:function(){this.show_edit=!0},hide_edit:function(){this.show_edit=!1},popup_delete:function(){this.show_delete=!0},hide_delete:function(){this.show_delete=!1},show_user:function(t){this.data.name=t.name,this.data.email=t.email,this.data.id=t.id,this.data.role=t.role,this.data.created=t.date.created,this.data.updated=t.date.updated,this.data.login=t.date.login,this.popup_edit()},button_update_reset:function(){let t=this;setTimeout(function(){t.progress_update.waiting=!1,t.progress_update.error=!1,t.progress_update.success=!1},1e3)},button_delete_reset:function(){let t=this;setTimeout(function(){t.progress_delete.waiting=!1,t.progress_delete.error=!1,t.progress_delete.success=!1},1e3)},onSubmit_update:function(t){this.progress_update.waiting=!0;let e=this;this.$request.request_url_form(t,function(t,s){if(e.button_update_reset(),t)return e.expired_token_check(t),e.progress_update.error=!0,void e.$refs.messageBtn.$emit("message",{class:"error text-negative",message:t.message});e.$refs.messageBtn.$emit("message",{class:"success text-positive",message:s.message}),e.progress_update.success=!0,e.$root.$emit("userChanged"),setTimeout(function(){e.hide_edit()},2300)})},onSubmit_delete:function(t){let e=this,s={url:"/api/admin/user/"+this.id_user+"?_method=DELETE",method:"POST",body:""};this.progress_delete.waiting=!0,this.$request.request_url(s,function(t,s){if(e.button_delete_reset(),t)return e.expired_token_check(t),e.progress_delete.error=!0,void e.$refs.messageBtnDel.$emit("message",{class:"error text-negative",message:t.message});e.$refs.messageBtnDel.$emit("message",{class:"success text-positive",message:s.message}),e.progress_delete.success=!0,e.$root.$emit("userChanged"),setTimeout(function(){e.hide_delete()},2e3),setTimeout(function(){e.hide_edit()},2300)})}},components:{"c-button":st,"c-popup":Kt,"c-message":_t}},ce=le,ue=Object(u["a"])(ce,oe,re,!1,null,null,null);ue.options.__file="c_admin_edit.vue";var de=ue.exports,me=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("c-panel",{staticClass:"admin order"},[s("div",{attrs:{slot:"header-no-cap"},slot:"header-no-cap"},[s("span",{staticClass:"text-uppercase"},[t._v(" users ")]),s("span",[t._v(" (all) : "+t._s(t.data.length)+" ")])]),s("table",{staticStyle:{margin:"0 !important",padding:"0 !important"},attrs:{slot:"no-margin"},slot:"no-margin"},[s("thead",{staticClass:"head"},[s("tr",{staticClass:"row"},[s("th",{staticClass:"text text-blur colour-text-dark"},[t._v("Name")]),s("th",{staticClass:"text text-blur colour-text-dark"},[t._v("Email")]),s("th",{staticClass:"text text-blur colour-text-dark"},[t._v("Role")]),s("th",{staticClass:"text text-blur colour-text-dark"})])]),s("tbody",t._l(t.data,function(e){return s("tr",{key:e.email,staticClass:"row"},[s("td",{staticClass:"text"},[s("p",[t._v(" "+t._s(e.name)+" ")])]),s("td",{staticClass:"text"},[s("p",[t._v(" "+t._s(e.email)+" ")])]),s("td",{staticClass:"text"},[s("p",[t._v(" "+t._s(e.role)+" ")])]),s("td",{staticClass:"text"},[s("button",{staticClass:"button text-light",on:{click:function(s){t.onClick(e)}}},[t._v("\n\t\t\t\t\t\tO\n\t\t\t\t\t")])])])}),0)]),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("c-message",{ref:"messageBtn"})],1)])},he=[],pe={name:"cAdminUsersAll",mixins:[Ht],data(){return{data:Array}},mounted(){this.get_users_all(),this.$root.$on("userChanged",this.event_get_users_all)},methods:{onClick:function(t){this.$root.$emit("userAdminSelect",t)},event_get_users_all:function(){let t=this;setTimeout(function(){t.get_users_all()},1e3)},get_users_all:function(){let t=this,e={url:"/api/admin/user/all",method:"POST",body:""};this.$request.request_url(e,function(e,s){if(e)return t.expired_token_check(e),void t.$refs.messageBtn.$emit("message",{class:"error text-negative",message:e.message});t.data=s.data})}},components:{"c-panel":lt,"c-message":_t}},fe=pe,_e=(s("1cf3"),Object(u["a"])(fe,me,he,!1,null,"085c87f2",null));_e.options.__file="c_admin_users_all.vue";var ge=_e.exports,be=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("c-panel",{staticClass:"admin"},[s("div",{attrs:{slot:"header-no-cap"},slot:"header-no-cap"},[s("span",{staticClass:"text-uppercase"},[t._v(" users ")]),s("span",[t._v(" (30days) : "+t._s(t.data.new.length)+" ")])]),s("div",{staticStyle:{margin:"0 !important",padding:"0 !important"},attrs:{slot:"no-margin"},slot:"no-margin"},[s("table",{staticStyle:{margin:"0 !important",padding:"0 !important"}},[s("thead",{staticClass:"head"},[s("tr",{staticClass:"row"},[s("th",{staticClass:"text text-blur colour-text-dark"},[t._v("Name")]),s("th",{staticClass:"text text-blur colour-text-dark"},[t._v("Email")]),s("th",{staticClass:"text text-blur colour-text-dark"},[t._v("Role")]),s("th",{staticClass:"text text-blur colour-text-dark"})])]),s("tbody",t._l(t.data.new,function(e){return s("tr",{key:e.id,staticClass:"row"},[s("td",{staticClass:"text"},[s("p",[t._v(" "+t._s(e.name))])]),s("td",{staticClass:"text"},[s("p",[t._v(" "+t._s(e.email)+" ")])]),s("td",{staticClass:"text"},[s("p",[t._v(" "+t._s(e.role)+" ")])]),s("td",{staticClass:"text"},[s("button",{staticClass:"button text-light",on:{click:function(s){t.onClick(e)}}},[t._v("\n\t\t\t\t\t\t\tO\n\t\t\t\t\t\t")])])])}),0)])]),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("c-message",{ref:"messageBtn"})],1)])},ve=[],ye={name:"cAdminUsersMonth",mixins:[Ht],data(){return{data:{new:[],login:[],updated:[]}}},mounted(){this.get_users_month(),this.$root.$on("userChanged",this.event_get_users_month)},methods:{onClick:function(t){this.$root.$emit("userAdminSelect",t)},event_get_users_month:function(){let t=this;setTimeout(function(){t.get_users_month()},1e3)},get_users_month:function(){let t=this,e={url:"/api/admin/user/month",method:"POST",body:""};this.$request.request_url(e,function(e,s){if(e)return t.expired_token_check(e),void t.$refs.messageBtn.$emit("message",{class:"error text-negative",message:e.message});t.data=s.data,t.$root.$emit("adminMonthData",s.data)})}},components:{"c-button":st,"c-panel":lt,"c-message":_t}},we=ye,xe=(s("80a3"),Object(u["a"])(we,be,ve,!1,null,"8067ca94",null));xe.options.__file="c_admin_users_month.vue";var $e=xe.exports,Ce=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"admin panel width-90 center-auto-h shadow order",staticStyle:{"flex-grow":"3 !important"}},[s("header",[s("p",{staticClass:"title text-uppercase text-small"},[s("span",{staticClass:"text-uppercase"},[t._v(" Users ("+t._s(t.graph_length)+" days) ")])])]),t._m(0)])},ke=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{margin:"0 !important",padding:"0 !important",height:"150px !important"}},[s("canvas",{attrs:{id:"id-chart"}})])}],je=s("5b20"),Se=s.n(je),Ee={name:"cAdminUserGraph",data(){return{graph_length:30,chartData:{type:"bar",data:{labels:[],datasets:[{label:"new",data:[],backgroundColor:[]},{label:"login",data:[],backgroundColor:[]},{label:"updated",data:[],backgroundColor:[]}]},options:{responsive:!0,maintainAspectRatio:!1}}}},created(){},mounted(){this.$root.$on("adminMonthData",this.draw_graph),this.default_graph_setup()},computed:{},methods:{draw_graph:function(t){let e=this;setTimeout(function(){e.convert_users_to_days(t),e.createChart("id-chart",e.chartData)},2e3)},date_to_int:function(t){let e=864e5,s=Math.ceil(new Date(t).getTime()/e),a=Math.ceil((new Date).getTime()/e),n=a-s;return n},default_graph_setup:function(){this.chartData.data.datasets=[{label:"new",data:[],backgroundColor:[]},{label:"login",data:[],backgroundColor:[]},{label:"updated",data:[],backgroundColor:[]}];for(let t=0;t<this.graph_length;t++)t%3?this.chartData.data.labels.push("."):this.chartData.data.labels.push(t);for(let t=0;t<this.graph_length;t++)this.chartData.data.datasets[0].backgroundColor.push("rgba(200, 10, 10, .4)"),this.chartData.data.datasets[1].backgroundColor.push("rgba(10, 200, 10, .4)"),this.chartData.data.datasets[2].backgroundColor.push("rgba(10, 10, 200, .4)")},convert_users_to_days:function(t){let e=[],s=[],a=[];for(let n=0;n<this.graph_length;n++)e.push(0),s.push(0),a.push(0);for(let n=0;n<t.new.length;n++){let s=this.date_to_int(t.new[n].date.created);s<=this.graph_length&&(e[s]+=1)}for(let n=0;n<t.login.length;n++){let e=this.date_to_int(t.login[n].date.login);e<=this.graph_length&&(s[e]+=1)}for(let n=0;n<t.updated.length;n++){let e=this.date_to_int(t.updated[n].date.updated);e<=this.graph_length&&(a[e]+=1)}this.chartData.data.datasets[0].data=e,this.chartData.data.datasets[1].data=s,this.chartData.data.datasets[2].data=a},createChart:function(t,e){const s=document.getElementById(t);new Se.a(s,{type:e.type,data:e.data,options:e.options})}},components:{"c-button":st,"c-panel":lt}},Oe=Ee,Te=(s("8448"),Object(u["a"])(Oe,Ce,ke,!1,null,"feebb7e2",null));Te.options.__file="c_admin_users_graph.vue";var Pe=Te.exports,De={name:"Admin",data(){return{}},mounted(){},methods:{},components:{"c-admin-edit":de,"c-admin-db":ie,"c-admin-users-all":ge,"c-admin-users-month":$e,"c-admin-users-graph":Pe}},qe=De,Be=Object(u["a"])(qe,Qt,Zt,!1,null,null,null);Be.options.__file="Admin.vue";var Ne=Be.exports,Ae=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("c-panel",{staticClass:"flex-only-on-large"},[s("div",{attrs:{slot:"header"},slot:"header"},[t._v("\n\t\tAdmin Request\n\t")]),s("form",{staticClass:"form",attrs:{action:"/api/admin/request",method:"POST"},on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[s("div",{staticClass:"field"},[s("p",{staticClass:"text label"},[t._v("Password:")]),s("input",{staticClass:"text",attrs:{type:"password",name:"password",placeholder:"Admin Password"}})]),s("c-button",{attrs:{progress:t.progress}})],1)])},Ie=[],Le={name:"AdminCreate",data(){return{progress:{waiting:!1,success:!1,error:!1}}},created(){},methods:{button_reset:function(){let t=this;setTimeout(function(){t.progress.waiting=!1,t.progress.success=!1,t.progress.error=!1},1e3)},onSubmit:function(t){this.progress.waiting=!0;let e=this;this.$request.request_url_form(t,function(t,s){if(e.button_reset(),t)return e.progress.error=!0,void console.log("error");e.progress.success=!0,setTimeout(function(){e.$store.dispatch("user/login_success",s.token),e.$router.push("/")},1e3)})}},components:{"c-button":st,"c-panel":lt}},Re=Le,ze=Object(u["a"])(Re,Ae,Ie,!1,null,null,null);ze.options.__file="AdminRequest.vue";var Me=ze.exports,Ue=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("c-panel",[s("div",{attrs:{slot:"header"},slot:"header"},[t._v("\n\t\t\tCreate Board\n\t\t")]),s("form",{staticClass:"form",attrs:{action:"/api/board/create",method:"POST"},on:{submit:function(e){return e.preventDefault(),t.onCreate(e)}}},[s("div",{staticClass:"field"},[s("p",{staticClass:"text label"},[t._v("Name:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name_string,expression:"form.name_string"}],staticClass:"text",attrs:{required:"",type:"string",name:"name",placeholder:"Name"},domProps:{value:t.form.name_string},on:{input:function(e){e.target.composing||t.$set(t.form,"name_string",e.target.value)}}})]),s("div",{staticClass:"field"},[s("p",{staticClass:"text label"},[t._v("Words:")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.word_string,expression:"form.word_string"}],staticClass:"text",staticStyle:{height:"3.5rem"},attrs:{required:"",type:"string",name:"words",placeholder:"seperate with , or space"},domProps:{value:t.form.word_string},on:{change:t.words_update,input:function(e){e.target.composing||t.$set(t.form,"word_string",e.target.value)}}})]),s("c-button",{ref:"btnSubmit"},[t._v("\n \t\t\t\tCreate\n \t\t\t")]),s("c-message",{ref:"msgSubmit"})],1),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("div",{staticClass:"tags"},[s("transition-group",{staticClass:"tag1",attrs:{name:"tag"}},t._l(t.words,function(e,a){return s("c-tag",{key:e},[t._v("\n\t\t\t\t\t\t\t"+t._s(e)+"\n\t\t\t\t\t")])}),1)],1)])])},Je=[],Fe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"button fade-in",class:t.get_state,on:{click:t.clicked}},[s("p",{staticClass:"text text-light"},[t._t("default",[t._v(" \n\t\t\t \tSubmit \n\t\t\t")])],2),s("div",{staticClass:"anim-container",class:t.get_display},[s("span",{staticClass:"strobe"}),s("span",{staticClass:"strobe"}),s("span",{staticClass:"strobe"})])])},Ge=[],Ke={name:"cButton",data(){return{obj:{state:"",display:!1},time:{reset:4e3}}},props:{onClick:Function},computed:{get_state:function(){return this.obj.state},get_display:function(){return this.obj.display?"is-active":""}},methods:{state_set:function(t){this.obj.display=!0,""!==t&&"reset"!==t||this.state_reset(),"waiting"===t&&(this.obj.state="is-waiting"),"success"===t&&(this.obj.state="is-success"),"error"===t&&(this.obj.state="is-error")},state_reset:function(){let t=this;setTimeout(function(){t.obj.display=!1},t.time.reset-250),setTimeout(function(){t.obj.state=""},t.time.reset)},clicked:function(){void 0!==this.onClick&&this.onClick()}},mounted(){this.$on("state",this.state_set)},beforeDestroy(){this.$off("state",this.state_set)},components:{}},He=Ke,Ve=(s("47eb"),Object(u["a"])(He,Fe,Ge,!1,null,null,null));Ve.options.__file="c_buttonNew.vue";var We=Ve.exports,Xe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"tag text text-small"},[t._t("default",[t._v("\n\t\tnew tag\n\t")])],2)},Ye=[],Qe={name:"cTag",data(){return{}},props:{onClick:Function},methods:{clicked:function(){void 0!==this.onClick&&this.onClick()}},mounted(){},components:{}},Ze=Qe,ts=(s("b71a"),Object(u["a"])(Ze,Xe,Ye,!1,null,null,null));ts.options.__file="c_tag.vue";var es=ts.exports;const ss={methods:{onSubmit:function(t,e,s,a,n,i){let o=null!==a&&void 0!==a,r=null!==s&&void 0!==s;r&&s.$emit("state","waiting"),e.$request.request_url(t,function(t,e){return r&&s.$emit("state","reset"),t?(r&&s.$emit("state","error"),o&&a.$emit("message",{class:"error text-negative",message:t.message}),i(t)):(r&&s.$emit("state","success"),o&&a.$emit("message",{class:"success text-positive",message:e.message}),n(e))})}}};var as={name:"BoardCreate",mixins:[ss],data(){return{attrs:{server:{max_timeouts:5,timing:1500},action:Object},state:{init:!1,timeouts:0},form:{name_string:"",word_string:""},words:[],min_word_length:3}},methods:{init:function(t){if(!this.state.init){let t={url:"/api/board/create",method:"POST",JSON:!0,body:{name:"",words:""}};this.attrs.action=t,this.state.init=!0}},onCreate:function(t){if(void 0!==this.attrs.action.url){this.attrs.action.body.name=this.form.name_string,this.attrs.action.body.words=this.form.word_string;let t=this;this.onSubmit(this.attrs.action,t,t.$refs.btnSubmit,t.$refs.msgSubmit,t.onSuccess,t.onError)}},onSuccess:function(t){let e=this;setTimeout(function(){e.$router.push("/board/"+t.data.url)},100)},onError:function(t){if(this.state.timeouts<this.attrs.server.max_timeouts){let t=this;setTimeout(function(){t.state.timeouts+=1,t.onSubmit()},t.attrs.server.timing)}},words_update:function(){this.words=[];let t=this.form.word_string.split(/[, \n\t\r]+/);for(let e=0;e<t.length;e++)t[e].length>=this.min_word_length&&this.words.push(t[e])}},mounted(){this.init()},components:{"c-button":We,"c-panel":lt,"c-message":_t,"c-tag":es}},ns=as,is=Object(u["a"])(ns,Ue,Je,!1,null,null,null);is.options.__file="Board_Create.vue";var os=is.exports,rs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("c-panel",[s("div",{attrs:{slot:"header"},slot:"header"},[t._v("\n\t\tBoard Lobby\n\t")]),s("div",[s("c-button",{ref:"btnStart",attrs:{onClick:t.onStart}},[t._v("\n\t\t\tStart\n\t\t")])],1),s("div",[s("c-button",{ref:"btnRandom",attrs:{onClick:t.onRandom}},[t._v("\n\t\t\tRandom\n\t\t")])],1),s("div",[s("c-button",{ref:"btnJoin",attrs:{onClick:t.onJoin}},[t._v("\n\t\t\tJoin ID\n\t\t")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.instance,expression:"instance"}],attrs:{type:"string"},domProps:{value:t.instance},on:{input:function(e){e.target.composing||(t.instance=e.target.value)}}})],1),s("div",{ref:"btnShareHolder",staticStyle:{position:"relative"}},[s("c-button",{ref:"btnShare",attrs:{onClick:t.onShare}},[t._v("\n\t\t\tShare Board\n\t\t")]),t.shareLink.show?s("br"):t._e(),t.shareLink.show?s("br"):t._e(),t.shareLink.show?s("br"):t._e(),s("transition",{attrs:{name:"fade"}},[t.shareLink.show?s("div",{ref:"btnLink",staticClass:"share-link-window",style:t.shareLink.styles},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.shareLink.link,expression:"shareLink.link"}],ref:"shareLinkURL",staticClass:"share-link-input text input",attrs:{type:"string"},domProps:{value:t.shareLink.link},on:{input:function(e){e.target.composing||t.$set(t.shareLink,"link",e.target.value)}}}),s("transition",{attrs:{name:"fade"}},[t.shareLink.copied?t._e():s("button",{staticClass:"share-link-copy button no-hover",on:{click:t.onCopy}},[s("p",{staticClass:"text text-light"},[t._v("Copy")])])])],1):t._e()])],1),s("c-message",{ref:"messageBtn"})],1)},ls=[];const cs={methods:{get_screen_pos:function(t){let e=t.getClientRects();if(void 0===e[0])return!1;let s={top:e[0].top,left:e[0].left,width:e[0].width,height:e[0].height};return void 0===e[0].left&&(s.top=e[0].y,s.left=e[0].x),s}}};var us={name:"BoardLobby",mixins:[ss,cs],data(){return{board:"",instance:"",shareLink:{show:!1,copied:!1,link:"this is a link",styles:{top:0,left:0}}}},computed:{},methods:{init:function(){this.board=this.$route.params.board,this.shareLink.link=window.location.href},onSuccess:function(t){let e=this;setTimeout(function(){e.$router.push("/instance/"+t.data.url)},2e3)},onError:function(t){},onStart:function(t){let e={url:"/api/instance/"+this.board+"/create",method:"GET",body:""},s=this,a=s.$refs.btnStart;this.onSubmit(e,s,a,null,s.onSuccess,s.onError)},onRandom:function(t){let e={url:"/api/instance/"+this.board+"/random",method:"GET",body:""},s=this,a=s.$refs.btnRandom;this.onSubmit(e,s,a,null,s.onSuccess,s.onError)},onJoin:function(t){let e={url:"/api/instance/"+this.board+"/"+this.instance,method:"GET",body:""};if(this.instance.length>0){let t=this,s=t.$refs.btnJoin;this.onSubmit(e,t,s,null,t.onSuccess,t.onError)}},onCopy:function(){this.$refs.shareLinkURL.select();document.execCommand("copy"),this.shareLink.copied=!0},onShare:function(t){this.shareLink.copied=!0;let e=this;setTimeout(function(){e.shareLink.copied=!1},100),this.shareLink.show=!this.shareLink.show;let s=this.get_screen_pos(this.$refs.btnShare.$el),a=this.get_screen_pos(this.$refs.btnShareHolder);this.shareLink.styles.left=s.left-a.left+.5*s.width+"px",this.shareLink.styles.top=s.height+5+"px"}},mounted(){this.init()},components:{"c-button":We,"c-panel":lt,"c-message":_t,"c-tag":es}},ds=us,ms=(s("e2f1"),Object(u["a"])(ds,rs,ls,!1,null,null,null));ms.options.__file="Board_Lobby.vue";var hs=ms.exports,ps=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("c-panel",[s("template",{slot:"header"},[s("p",{staticClass:"title"},[t._v("\n\t\t\t\t"+t._s(t.board_name)+"\n\t\t\t")])]),s("template",{slot:"options"},[t.board_player?s("div",{staticClass:"score-holder"},[s("p",{staticClass:"score text text-light"},[t._v(" "+t._s(t.board_score)+" ")]),s("i",{staticClass:"fas fa-user-circle text-light",on:{click:t.player_toggle}})]):t._e()]),s("c-game-state"),s("c-game-poll"),s("c-game-submit"),s("c-game-board"),s("c-game-player"),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("c-button",{ref:"resetBtn",attrs:{onClick:t.resetBtn}},[t._v("\n\t\t\t\t\tTry Again?\n\t\t\t")]),s("div",{staticStyle:{position:"absolute",right:"0",top:"0",bottom:"0"}},[s("c-game-player-sync")],1)],1)],2),s("c-game-players-sync")],1)},fs=[],_s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.state.display?s("c-popup",{staticClass:"player",attrs:{onClick:t.window_hide}},[s("div",{attrs:{slot:"header"},slot:"header"},[t._v("\n\t\tJoin Game\n\t")]),s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],attrs:{type:"string",placeholder:"Your name",value:"form.name",required:""},domProps:{value:t.form.name},on:{input:function(e){e.target.composing||t.$set(t.form,"name",e.target.value)}}}),s("c-button",{ref:"btnOK",attrs:{onClick:t.send_form}},[t._v("\n\t\t\tOK\n\t\t")])],1),s("div",{attrs:{slot:"footer"},slot:"footer"})]):t._e()},gs=[],bs={name:"cPlayer",data(){return{attrs:{name:{min:3,max:33},player:Object},state:{display:!1,lock:!1},form:{name:""}}},methods:{init:function(){this.$root.$on("player_show",this.window_show),this.$root.$on("state_reset",this.reset);let t=this.$store.getters["game/get_player"];this.validate(t.data.name)&&!t.joined&&this.$root.$emit("state_player_join"),this.validate(t.data.name)||this.window_show_join()},validate:function(t){return""!==t&&(!(t.length<this.attrs.name.min)&&!(t.length>this.attrs.name.max))},form_same_store:function(){return this.form.name==this.attrs.player.data.name},send_form:function(){if(this.validate(this.form.name)){if(this.form_same_store()&&this.validate(this.form.name))return this.window_hide();this.attrs.player.data.name=this.form.name,this.$store.dispatch("game/set_player",this.attrs.player),this.attrs.player.joined?this.$root.$emit("state_player_submit"):this.$root.$emit("state_player_join"),this.state.lock=!1,this.window_hide()}},window_show_join:function(){this.state.lock=!0,this.window_show()},window_show:function(){this.attrs.player=this.$store.getters["game/get_player"],this.form.name=this.attrs.player.data.name,this.state.display=!0,this.attrs.player.joined&&this.$root.$emit("state_player",!1)},window_hide:function(){this.state.lock||(this.state.display=!1,this.attrs.player.joined&&this.$root.$emit("state_player",!0))},reset:function(){console.log("game player: resetting."),this.$store.dispatch("game/reset_player")},exit:function(){this.$root.$off("init_player"),this.$root.$off("player_show"),this.$root.$off("state_reset")}},mounted(){this.$root.$on("init_player",this.init)},beforeDestroy(){},components:{"c-button":st,"c-popup":Kt,"c-message":_t}},vs=bs,ys=Object(u["a"])(vs,_s,gs,!1,null,null,null);ys.options.__file="c_game_player_form.vue";var ws=ys.exports,xs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",{staticClass:"circle player-sync",class:{"is-sync":t.state.sync}})},$s=[];var Cs={name:"cGamePlayerSync",data(){return{attrs:{},state:{count:0,sync:!1,sent:!1}}},methods:{init:function(){this.$root.$on("state_poll_update",this.check)},check:function(){let t=this.$store.getters["game/get_instance"];t.polled!==this.state.count&&(this.state.count=t.polled,this.state.sent=!1);let e=this.$store.getters["game/get_player"];e.joined&&this.check_player_sync(t.data.players,e)},check_player_sync:function(t,e){if(void 0===t||0===t.length)return this.$root.$emit("state_exit");let s=this.player_index(t,e);if(s<0)return this.$root.$emit("state_exit");let a=t[s],n=this.player_diff(a,e);n?this.player_in_sync():this.player_out_sync()},player_in_sync:function(){this.state.sync=!0,this.state.sent=!1},player_out_sync:function(){this.state.sent||(this.state.sync=!1,this.state.sent=!0,this.$root.$emit("state_player_submit"))},player_index:function(t,e){for(let s=0;s<t.length;s++)if(t[s].url===e.url)return s;return-1},player_diff:function(t,e){return t.data.name==e.data.name&&(t.data.score==e.data.score&&t.data.words.toString()===e.data.words.toString())},exit:function(){this.$root.$off("state_poll_update")}},mounted(){this.init()},beforeDestroy(){this.exit()},components:{"c-message":_t}},ks=Cs,js=(s("1eab"),Object(u["a"])(ks,xs,$s,!1,null,null,null));js.options.__file="c_game_player_sync.vue";var Ss=js.exports,Es=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("c-message",{ref:"msgPoll"}),t._l(t.attrs.players,function(e,a){return s("p",{key:e.url},[t._v("\n\t\t\n\t\t\t"+t._s(e.data.name)+"\n\t")])})],2)},Os=[];function Ts(t,e){for(let s=0;s<e.length;s++)if(e[s].url==t.url)return e[s].data.name;return!1}var Ps={name:"cGamePlayersSync",data(){return{attrs:{players:[],players_hash:"",win:0,ahead:"",winner:"",player_url:""},state:{init:!1}}},methods:{init:function(){this.$root.$on("state_poll_update",this.instance_diff);let t=this.$store.getters["game/get_instance"];this.instance_copy(t)},init_player:function(){this.attrs.player_url=this.$store.getters["game/get_player"].url,this.attrs.player_url.length>2&&(this.state.init=!0)},instance_diff:function(){this.state.init||this.init_player();let t=this.$store.getters["game/get_instance"],e=this.players_hash(t);this.attrs.players_hash!==e&&this.instance_diff_players(t),t.data.game.winner.length>0&&this.attrs.winner!==t.data.game.winner&&this.instance_diff_winner(t),t.data.game.ahead.length>0&&this.attrs.ahead!==t.data.game.ahead&&this.instance_diff_ahead(t),this.instance_copy(t)},players_hash:function(t){let e="";for(let s=0;s<t.data.players.length;s++)e+=t.data.players[s].url;return e},player_self:function(t){return this.attrs.player_url===t.url},instance_diff_players:function(t){let e=[],s=[];for(let i=0;i<t.data.players.length;i++){let s=Ts(t.data.players[i],this.attrs.players);s||this.player_self(t.data.players[i])||e.push(t.data.players[i])}for(let i=0;i<this.attrs.players.length;i++){let e=Ts(this.attrs.players[i],t.data.players);e||this.player_self(this.attrs.players[i])||s.push(this.attrs.players[i])}let a=[];for(let i=0;i<e.length;i++){let t={class:"text-positive text",message:e[i].data.name+" has joined."};a.push(t)}for(let i=0;i<s.length;i++){let t={class:"text-positive text",message:s[i].data.name+" has left."};a.push(t)}let n=this;for(let i=0;i<a.length;i++)setTimeout(function(){void 0!==n&&void 0!==n.$refs.msgPoll&&n.$refs.msgPoll.$emit("message",a[i])},750*i)},instance_diff_ahead:function(t){if(t.data.game.ahead===t.data.game.winner)return;let e={url:t.data.game.ahead},s=Ts(e,t.data.players);if(!1!==s&&!this.player_self(e)){let t={class:"text-positive text",message:s+" is ahead!"};this.$refs.msgPoll.$emit("message",t)}},instance_diff_winner:function(t){let e={url:t.data.game.winner},s=Ts(e,t.data.players);if(!1!==s&&!this.player_self(e)){let t={class:"text-positive text",message:s+" is the Winner!"};this.$refs.msgPoll.$emit("message",t)}},instance_copy:function(t){this.attrs.win=t.data.game.win,this.attrs.players=t.data.players,this.attrs.players_hash=this.players_hash(t),this.attrs.ahead=t.data.game.ahead,this.attrs.winner=t.data.game.winner},exit:function(){this.$root.$off("state_poll_update")}},mounted(){this.init()},beforeDestroy(){this.exit()},components:{"c-message":_t}},Ds=Ps,qs=Object(u["a"])(Ds,Es,Os,!1,null,null,null);qs.options.__file="c_game_players_sync.vue";var Bs=qs.exports,Ns=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("c-message",{ref:"msgPoll"})},As=[];let Is=null;var Ls={name:"cGamePoll",mixins:[ss],data(){return{attrs:{max_timeouts:5,action:Object,timing:5e3},state:{polled:0,timeouts:0,ready:!1,polling:!1}}},methods:{init:function(){this.$root.$on("state_play",this.check_state),this.$root.$on("state_reset",this.reset),""===this.$store.getters["game/get_instance"].url&&this.$store.dispatch("game/set_instance",{url:this.$route.params.instance});let t=this.$store.getters["game/get_instance"],e={url:"/api/instance/"+t.url,method:"GET",JSON:!1,body:""};this.attrs.action=e,this.poll_submit()},ready:function(t){this.state.ready!==t&&(this.state.ready=t,console.log("poll: "+t),this.$root.$emit("state_poll",t))},poll_submit:function(){this.onSubmit(this.attrs.action,this,null,null,this.poll_success,this.poll_error)},poll_success:function(t){if(t.data.polled=this.state.polled,this.$store.dispatch("game/set_instance",t.data),this.$root.$emit("state_poll_update"),this.ready(!0),this.state.ready&&this.state.polling){let t=this;Is=setTimeout(function(){t.state.polled+=1,console.log("poll: "+t.state.polled),t.poll_submit()},t.attrs.timing)}else this.stop()},poll_error:function(t){if(this.state.ready&&this.state.polling){if(t.status,this.state.timeouts<this.attrs.max_timeouts){let t=this;Is=setTimeout(function(){console.log("retrying connection."),t.state.timeouts+=1,t.poll_submit()},t.attrs.timing)}}else this.ready(!1),this.stop()},reset:function(){console.log("game poll: resetting.")},check_state:function(t){t?this.play():this.stop()},play:function(){this.state.polling=!0,this.poll_submit()},stop:function(){this.state.polling=!1,clearTimeout(Is)},exit:function(){this.stop(),this.$root.$off("state_play"),this.$root.$off("state_reset")}},mounted(){this.init()},beforeDestroy(){this.exit()},components:{"c-message":_t}},Rs=Ls,zs=Object(u["a"])(Rs,Ns,As,!1,null,null,null);zs.options.__file="c_game_poll.vue";var Ms=zs.exports,Us=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("c-message",{ref:"msgPoll"})},Js=[],Fs={name:"cGameState",data(){return{attrs:{},state:{init:!1,board_ready:!1,player_ready:!1,poll_ready:!1,submit_ready:!1,play:!1}}},methods:{init:function(){this.$root.$on("state_board",this.board_state),this.$root.$on("state_player",this.player_state),this.$root.$on("state_poll",this.poll_state),this.$root.$on("state_submit",this.submit_state),this.$root.$on("state_reset",this.reset),this.$root.$on("state_exit",this.forced_redirect),this.state.init=!0},board_state:function(t){t!==this.state.board_ready&&(this.state.board_ready=t,this.check_game(),t&&this.$root.$emit("init_player"))},player_state:function(t){t!==this.state.player_ready&&(this.state.player_ready=t,this.check_game())},poll_state:function(t){t!==this.state.poll_ready&&(this.state.poll_ready=t,this.check_game(),t&&(this.$root.$emit("init_board"),this.$root.$emit("init_submit")))},submit_state:function(t){t!==this.state.submit_ready&&(this.state.submit_ready=t,this.check_game())},check_game:function(){this.state.player_pause?this.stop():this.init&&this.state.board_ready&&this.state.poll_ready&&this.state.player_ready&&this.state.submit_ready?this.play():this.stop()},play:function(){console.log("game state: playing."),this.state.play=!0;let t=this;setTimeout(function(){t.$root.$emit("state_play",!0)},100)},stop:function(){console.log("game state: stopping."),this.state.play=!1,this.$root.$emit("state_play",!1)},reset:function(){console.log("game state: resetting.")},exit:function(){this.stop();let t=this;setTimeout(function(){t.$store.dispatch("game/exit")},100),this.$root.$off("state_board"),this.$root.$off("state_player"),this.$root.$off("state_poll"),this.$root.$off("state_submit"),this.$root.$off("state_reset"),console.log("state exiting.")},forced_redirect:function(){let t=this;setTimeout(function(){t.$router.push("/")})}},mounted(){this.init()},beforeDestroy(){this.exit()},components:{"c-message":_t}},Gs=Fs,Ks=Object(u["a"])(Gs,Us,Js,!1,null,null,null);Ks.options.__file="c_game_state.vue";var Hs=Ks.exports,Vs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",t._l(t.board.words,function(e,a){return s("c-word",{key:e.key,attrs:{wordData:e,state:t.state}})}),1)},Ws=[],Xs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"word",mode:"out-in"}},[s("button",{staticClass:"word-square word text text-smal1 delay-1",class:{"is-selected":t.wordData.selected},on:{click:t.toggle}},[s("div",{staticClass:"word-content"},[s("p",[t._v(" "+t._s(t.wordData.word)+" ")])])])])},Ys=[],Qs={name:"cWord",data(){return{}},props:{state:Object,wordData:Object},methods:{init:function(){this.$root.$on("state_reset",this.reset)},reset:function(){this.wordData.selected=!1},toggle:function(){this.state.play&&(this.wordData.selected?(this.wordData.selected=!1,this.$store.dispatch("game/score_remove"),this.$store.dispatch("game/word_remove",this.wordData.word)):(this.wordData.selected=!0,this.$store.dispatch("game/score_add"),this.$store.dispatch("game/word_add",this.wordData.word))),this.$root.$emit("state_player_submit")},exit:function(){}},mounted(){this.init()},beforeDestroy(){this.exit()},components:{}},Zs=Qs,ta=(s("853e"),Object(u["a"])(Zs,Xs,Ys,!1,null,null,null));ta.options.__file="c_word.vue";var ea=ta.exports,sa={name:"cBoard",mixins:[ss],data(){return{attrs:{words:{random:!0,count:0},server:{max_timeouts:5,timing:1e3},action:Object},state:{timeouts:0,ready:!1,play:!1},board:{words:[]}}},computed:{},methods:{init:function(){this.$root.$on("state_reset",this.reset),this.$root.$on("state_play",this.play);let t=this.$store.getters["game/get_instance"].data.board;if(""===t)return;let e={url:"/api/board/"+t,method:"GET",JSON:!1};this.attrs.action=e;let s=this;this.onSubmit(s.attrs.action,s,null,null,s.board_success,s.board_error)},board_success:function(t){this.$store.dispatch("game/set_board",t.data),this.board_setup_words(),this.ready(!0)},board_error:function(t){if(this.state.timeouts<this.attrs.server.max_timeouts){let t=this;setTimeout(function(){t.ready(!1),t.state.timeouts+=1,t.onSubmit(t.attrs.action,t,null,null,t.board_success,t.board_error)},t.attrs.server.timing)}},array_random:function(t){let e=[];for(let s=0;s<t.length;s++)e.push(t[s]);for(let s=e.length-1;s>=0;s--){let t=Math.floor(Math.random()*(s+1)),a=e[s];e[s]=e[t],e[t]=a}return e},array_words:function(t,e){let s=this.array_random(t),a=[],n=Math.min(e,t.length);for(let i=0;i<n;i++){let t={word:s[i],selected:!1,key:this.attrs.words.count};a.push(t),this.attrs.words.count+=1}return a},board_setup_words:function(){let t=this.$store.getters["game/get_board"],e=this.array_words(t.data.words,t.data.game.display);for(let s=0;s<e.length;s++)this.$set(this.board.words,s,e[s])},reset:function(){console.log("game board: resetting."),this.board_setup_words()},ready:function(t){this.state.ready!==t&&(this.state.ready=t,console.log("board: "+t),this.$root.$emit("state_board",t))},play:function(t){this.state.play=t},exit:function(){this.$root.$off("init_board"),this.$root.$off("state_reset"),this.$root.$off("state_play")}},mounted(){this.$root.$on("init_board",this.init)},beforeDestroy(){this.exit()},components:{"c-word":ea}},aa=sa,na=Object(u["a"])(aa,Vs,Ws,!1,null,null,null);na.options.__file="c_game_board.vue";var ia=na.exports,oa=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("c-message",{ref:"msgPoll"})},ra=[];let la=null,ca=null;var ua={name:"cGameSubmit",mixins:[ss],data(){return{attrs:{max_timeouts:5,action:Object,timing:5e3},state:{sent:0,timeouts:0,ready:!1,play:!1,joining:!1,sending:!1,waiting:!1}}},methods:{init:function(){if(!this.state.ready){let t=this.$store.getters["game/get_instance"];if(""===t.url)return;this.$root.$on("state_play",this.check_state),this.$root.$on("state_reset",this.reset),this.$root.$on("state_player_join",this.join_submit),this.$root.$on("state_player_submit",this.player_submit);let e={url:"/api/instance/"+t.url,method:"POST",JSON:!0,body:{player:{}}};this.attrs.action=e,this.ready(!0)}},ready:function(t){this.state.ready!==t&&(this.state.ready=t,console.log("submit: "+t),this.$root.$emit("state_submit",t))},prepare_player_changes:function(){this.attrs.action.body.player=this.$store.getters["game/get_player"]},player_submit:function(){if(this.state.ready||this.init(),this.state.sending){if(!this.state.waiting){this.state.waiting=!0;let t=this;ca=setTimeout(function(){t.player_submit(),t.state.waiting=!1,console.log("sending a delayed submit.")},3e3)}}else this.send_submit()},join_submit:function(){this.prepare_player_changes();this.state.joining;this.state.joining||this.attrs.action.body.player.joined||(this.state.joining=!0,this.state.sending=!0,this.attrs.action.method="POST",this.onSubmit(this.attrs.action,this,null,null,this.send_success,this.send_error))},exit_submit:function(){console.log("sending exit submit!"),this.prepare_player_changes(),this.state.sending=!0,this.attrs.action.method="DELETE";let t=function(){};this.onSubmit(this.attrs.action,this,null,null,t,t)},send_submit:function(){this.prepare_player_changes(),this.state.sending=!0,this.attrs.action.method="PUT",this.onSubmit(this.attrs.action,this,null,null,this.send_success,this.send_error)},send_success:function(t){this.state.sending=!1;this.state.play&&(this.state.sent+=1),void 0!==t.data&&!0!==t.data&&(this.attrs.action.body.player.joined||""===t.data.url||(t.data.joined=!0,this.$root.$emit("state_player",!0)),this.$store.dispatch("game/set_player",t.data))},send_error:function(t){let e=this;this.state.sending&&(this.state.sending=!1,t.status,this.state.timeouts<this.attrs.max_timeouts?la=setTimeout(function(){console.log("retrying connection."),e.state.timeouts+=1,e.send_submit()},e.attrs.timing):this.$root.$emit("state_exit"))},check_state:function(t){this.state.play!==t&&(this.state.play?this.play():this.stop())},play:function(){this.state.play=!0},stop:function(){this.state.play=!1,clearTimeout(la),clearTimeout(ca)},reset:function(){console.log("game submit: resetting.")},exit:function(){this.exit_submit(),this.stop(),this.$root.$off("init"),this.$root.$off("init_submit"),this.$root.$off("state_play"),this.$root.$off("state_reset"),this.$root.$off("state_player_submit")}},mounted(){this.$root.$on("init_submit",this.init)},beforeDestroy(){this.exit()},components:{"c-message":_t}},da=ua,ma=Object(u["a"])(da,oa,ra,!1,null,null,null);ma.options.__file="c_game_submit.vue";var ha=ma.exports,pa={name:"Game",data(){return{attrs:{}}},computed:{board_name:function(){return this.$store.getters["game/get_board_name"]},board_score:function(){return this.$store.getters["game/get_score"]},board_player:function(){let t=this.$store.getters["game/get_player"];return t.data.name,!0}},methods:{resetBtn:function(){console.log("btn: reset."),this.$root.$emit("state_reset")},player_toggle:function(){this.$root.$emit("player_show")}},mounted(){},beforeDestroy(){},components:{"c-button":We,"c-panel":lt,"c-game-player":ws,"c-game-player-sync":Ss,"c-game-players-sync":Bs,"c-game-poll":Ms,"c-game-state":Hs,"c-game-board":ia,"c-game-submit":ha}},fa=pa,_a=(s("568f"),Object(u["a"])(fa,ps,fs,!1,null,null,null));_a.options.__file="Game.vue";var ga=_a.exports;a["a"].use($["a"]);const ba=(t,e,s)=>{if("user"!==t.meta.type&&"admin"!==t.meta.type)return s();let a=A.getters["user/get_user"],n="user"===a.role,i="admin"===a.role;return"user"===t.meta.type&&(n||i)?s():"admin"===t.meta.type&&i?s():s({path:"/login"})};var va=new $["a"]({mode:"history",base:"/",routes:[{path:"/",name:"index",component:U},{path:"/register",name:"register",component:yt},{path:"/login",name:"login",component:jt},{path:"/logout",name:"logout",component:Dt,meta:{type:"user"},beforeEnter:ba},{path:"/account",name:"account",component:Yt,beforeEnter:ba,meta:{type:"user"},beforeEnter:ba},{path:"/admin/request",name:"adminrequest",component:Me,meta:{type:"user"},beforeEnter:ba},{path:"/admin",name:"admin",component:Ne,meta:{type:"admin"},beforeEnter:ba},{path:"/board/create",name:"board create",component:os},{path:"/board/:board",name:"board lobby",component:hs},{path:"/instance/:instance",name:"board game",component:ga}]});function ya(t,e,s=!1,a,n){var i=new XMLHttpRequest;i.open(e,t,!0),s&&i.setRequestHeader("Content-Type","application/json; charset=UTF-8");let o=$a();o.length>5&&i.setRequestHeader("Authorization","Bearer "+o),i.send(a),i.onload=function(){if(this.status>=200&&this.status<300)return n(null,JSON.parse(this.responseText));let t={};try{t=JSON.parse(this.responseText.toString("ascii"))}catch(e){let t=this.statusText;return 0===t.length&&(t="No network connection."),n({status:this.status,message:this.statusText})}return n(t)},i.ontimeout=function(){return n(this.response)},i.onerror=function(){let t=this.statusText;return 0===t.length&&(t="No network connection."),n({status:this.status,message:t})}}let wa="";function xa(t){wa=t.length<=5?"":t}function $a(){return wa}function Ca(){let t=window.localStorage.getItem("tokenStringKube");xa(t)}function ka(t,e){t.preventDefault();let s=t.target.action,a=t.target.method,n=new FormData(t.target);ya(s,a,!1,n,function(t,s){return t?e(t):e(null,s)})}function ja(t,e){let s={},a=t.JSON||!1;void 0!==t.body&&a&&(s=JSON.stringify(t.body)),ya(t.url,t.method,a,s,function(t,s){return t?e(t):e(null,s)})}let Sa={request_url:ja,request_url_form:ka,set_SecureKey:xa,get_SecureKey:$a,get_SecureKeyFile:Ca};var Ea={install:function(t){t.prototype.$request=Sa}};a["a"].config.productionTip=!1,a["a"].use(Ea),new a["a"]({router:va,store:A,render:t=>t(x)}).$mount("#app")},"59c9":function(t,e,s){"use strict";var a=s("d4fc"),n=s.n(a);n.a},"5bb6":function(t,e,s){},"5f9b":function(t,e,s){"use strict";var a=s("e7a7"),n=s.n(a);n.a},"6a1c":function(t,e,s){},"80a3":function(t,e,s){"use strict";var a=s("862e"),n=s.n(a);n.a},8448:function(t,e,s){"use strict";var a=s("6a1c"),n=s.n(a);n.a},"853e":function(t,e,s){"use strict";var a=s("ab6b"),n=s.n(a);n.a},"862e":function(t,e,s){},"98bc":function(t,e,s){"use strict";var a=s("5bb6"),n=s.n(a);n.a},a093:function(t,e,s){},a176:function(t,e,s){},a5f9:function(t,e,s){},ab6b:function(t,e,s){},b71a:function(t,e,s){"use strict";var a=s("268b"),n=s.n(a);n.a},ba83:function(t,e,s){"use strict";var a=s("e81b"),n=s.n(a);n.a},c9bd:function(t,e,s){},d123:function(t,e,s){},d4fc:function(t,e,s){},d91a:function(t,e,s){},e2f1:function(t,e,s){"use strict";var a=s("5220"),n=s.n(a);n.a},e7a7:function(t,e,s){},e81b:function(t,e,s){},f6cb:function(t,e,s){},fcec:function(t,e,s){},ff4e:function(t,e,s){},ff7b:function(t,e,s){}});
//# sourceMappingURL=app.495bf333.js.map