(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1f39505a"],{"4ab9":function(t,e,s){"use strict";s.d(e,"a",function(){return i});var i={methods:{expired_token_check:function(t){if(401===t.status&&"jwt expired"===t.message){var e=this;return setTimeout(function(){e.$router.push("/login")},2e3),!0}return!1}}}},5681:function(t,e,s){"use strict";var i=s("a5f9"),n=s.n(i);n.a},"77be":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex-only-on-large"},[t.isDeleting?s("c-popup",{attrs:{onClick:t.hide_delete}},[s("div",{attrs:{slot:"header"},slot:"header"},[t._v("\n\t\t\tDelete Account\n\t\t")]),s("p",{staticClass:"text"},[t._v(" Are you sure you want to delete ")]),s("p",{staticClass:"text"},[t._v(" this account? ")]),s("br"),s("div",{staticClass:"flex-row flex-row-between"},[s("c-button",{attrs:{onClick:t.hide_delete,type:"button"}},[t._v("\n\t\t\t\tClose\n\t\t\t")]),s("c-button",{staticClass:"colour-negative-bg",attrs:{type:"button",onClick:t.onSubmit_delete}},[t._v("\n\t\t\t\tDelete\n\t\t\t")])],1),s("c-message",{ref:"messageBtnDel"})],1):t._e(),s("c-panel",[s("div",{attrs:{slot:"header"},slot:"header"},[t._v("\n\t\t\tAccount\n\t\t")]),s("form",{staticClass:"form",attrs:{action:"/api/account/?_method=PUT",method:"POST"},on:{submit:function(e){return e.preventDefault(),t.onSubmit_update(e)}}},[t.isEditing?s("c-account-input",{attrs:{Input:t.account}}):s("c-account-text",{attrs:{Input:t.account}}),s("div",{staticClass:"flex-row flex-row-between",class:{"is-edit":!t.isEditing}},[s("c-button",{staticClass:"colour-yellow",attrs:{onClick:t.edit_switch,type:"button"}},[t._v("\n\t\t\t\t\t"+t._s(t.button_undo_label)+"\n\t\t\t\t")]),s("c-button",{directives:[{name:"show",rawName:"v-show",value:t.isEditing,expression:"isEditing"}],staticClass:"colour-positive-bg",attrs:{type:"submit",progress:t.progress_update}},[t._v("\n\t\t\t\t\tUpdate \n\t\t\t\t")]),s("c-button",{directives:[{name:"show",rawName:"v-show",value:t.isEditing,expression:"isEditing"}],staticClass:"colour-negative-bg",attrs:{type:"button",onClick:t.popup_delete,progress:t.progress_delete}},[t._v("\n\t\t\t\t\tDelete\n\t\t\t\t")])],1),s("c-message",{ref:"messageBtn"})],1)])],1)},n=[],o=(s("7f7f"),s("d0a4")),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"account-text"},[t.NameShow?s("div",{staticClass:"field"},[s("p",{staticClass:"text label"},[t._v("Name:")]),s("p",{staticClass:"text account-text-item"},[t._v("\n\t\t\t"+t._s(t.Input.Name.value)+"\n\t\t")])]):t._e(),t.EmailShow?s("div",{staticClass:"field"},[s("p",{staticClass:"text label"},[t._v("Email:")]),s("p",{staticClass:"text account-text-item"},[t._v("\n\t\t\t"+t._s(t.Input.Email.value)+"\n\t\t")])]):t._e(),t.PasswordShow?s("div",{staticClass:"field"},[s("p",{staticClass:"text label"},[t._v("Password:")]),s("p",{staticClass:"text account-text-item"},[t._v("\n\t\t\t"+t._s(t.getPassword)+"\n\t\t")])]):t._e()])},r=[],u={name:"AccountText",props:{Input:{Name:Object,Email:Object,Password:Object}},computed:{NameShow:function(){return!(void 0===this.Input.Name||!this.Input.Name.show)},EmailShow:function(){return!(void 0===this.Input.Email||!this.Input.Email.show)},PasswordShow:function(){return!(void 0===this.Input.Password||!this.Input.Password.show)},getPassword:function(){return"hidden"}}},c=u,l=(s("5681"),s("2877")),d=Object(l["a"])(c,a,r,!1,null,"d1c0f190",null),p=d.exports,f=s("b99b"),m=s("4240"),h=s("f070"),_=s("e82d"),g=s("4ab9"),v={name:"Account",mixins:[g["a"]],data:function(){return{isEditing:!1,isDeleting:!1,progress_update:{waiting:!1,success:!1,error:!1},progress_delete:{waiting:!1,success:!1,error:!1},account:{Name:{show:!0,isRequired:!0,value:""},Email:{show:!0,isRequired:!0,value:""},Password:{show:!0,isRequired:!0,value:""}}}},computed:{button_undo_label:function(){return this.isEditing?"undo":"edit"}},created:function(){},mounted:function(){this.get_user()},methods:{popup_delete:function(){this.isDeleting=!0},hide_delete:function(){this.isDeleting=!1},get_user:function(){var t=this.$store.getters["user/get_user"];this.account.Name.value=t.name,this.account.Email.value=t.email},edit_switch:function(){this.isEditing=!this.isEditing},button_reset_update:function(){var t=this;setTimeout(function(){t.progress_update.waiting=!1,t.progress_update.success=!1,t.progress_update.error=!1},1e3)},button_reset_delete:function(){var t=this;setTimeout(function(){t.progress_delete.waiting=!1,t.progress_delete.success=!1,t.progress_delete.error=!1},1e3)},onSubmit_update:function(t){var e=this;this.progress_update.waiting=!0,this.$request.request_url_form(t,function(t,s){if(e.button_reset_update(),t)return e.expired_token_check(t),e.progress_update.error=!0,void e.$refs.messageBtn.$emit("message",{class:"error text-negative",message:t.message});e.progress_update.success=!0,e.$refs.messageBtn.$emit("message",{class:"success text-positive",message:s.message}),setTimeout(function(){e.$store.dispatch("user/login_success",s.token),e.$router.push("/")},1e3)})},onSubmit_delete:function(t){var e=this,s={url:"/api/account/?_method=DELETE",method:"POST",body:""};this.progress_delete.waiting=!0,this.$request.request_url(s,function(t,s){if(t)return e.expired_token_check(t)&&setTimeout(function(){e.hide_delete()},1400),e.progress_delete.error=!0,void e.$refs.messageBtnDel.$emit("message",{class:"error text-negative",message:t.message});e.progress_delete.success=!0,e.$refs.messageBtnDel.$emit("message",{class:"success text-positive",message:s.message}),e.button_reset_delete(),setTimeout(function(){e.hide_delete()},1400),setTimeout(function(){e.$store.dispatch("user/logout_success"),e.$router.push("/")},1900)})}},components:{"c-button":f["a"],"c-panel":m["a"],"c-popup":h["a"],"c-account-input":o["a"],"c-account-text":p,"c-message":_["a"]}},w=v,b=Object(l["a"])(w,i,n,!1,null,null,null);e["default"]=b.exports},a5f9:function(t,e,s){},bdb3:function(t,e,s){},f070:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"parent"},[s("div",{ref:"popup",staticClass:"popup-fill"},[s("transition",{attrs:{appear:"",name:"fade"}},[t.onShow?s("div",{staticClass:"fill-all colour-bg-shade",on:{click:t.clicked}}):t._e()]),s("transition",{attrs:{appear:"",name:"slide-in"}},[t.onShow?s("div",{staticClass:"panel-parent"},[s("div",{staticClass:"panel center-auto-h colour-bg-pop border-round width-95 shadow"},[s("header",{},[s("p",{staticClass:"header"},[t._t("header")],2),s("div",{staticClass:"options flex-row flex-row-end center-auto-h"},[t._t("options")],2)]),s("div",{staticClass:"center-auto-h"},[s("main",{staticClass:"text"},[t._t("default")],2),t._t("no-margin"),s("footer",{staticClass:"footer"},[s("p",{staticClass:"text"},[t._t("footer")],2)])],2)])]):t._e()])],1)])},n=[];s("2dd7");var o={name:"cPopUp",data:function(){return{}},props:{onClick:Function,onShow:Boolean,onRemove:Boolean},methods:{clicked:function(){void 0!==this.onClick&&this.onClick()},exit:function(){this.$refs.parent.appendChild(this.$refs.popup)}},mounted:function(){document.body.appendChild(this.$refs.popup)},beforeDestroy:function(){this.exit()},components:{}},a=o,r=(s("f730"),s("2877")),u=Object(r["a"])(a,i,n,!1,null,"43f7f6c4",null);e["a"]=u.exports},f730:function(t,e,s){"use strict";var i=s("bdb3"),n=s.n(i);n.a}}]);
//# sourceMappingURL=chunk-1f39505a.dc282700.js.map