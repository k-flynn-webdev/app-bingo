(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-262748c7"],{"4a20":function(t,e,s){"use strict";var i=s("c220"),n=s.n(i);n.a},"828b":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",[s("c-panel",[s("div",{staticClass:"sections anim-6",class:{"is-active":t.state.sections[0]},attrs:{"data-open":t.state.sections[0]}},[s("c-field-input",{ref:"field_name",attrs:{placeholder:t.attrs.name.placeholder},on:{change:t.validate_name},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}},[s("p",{staticClass:"label",attrs:{slot:"pre"},slot:"pre"},[t._v(" Name ")])])],1),s("div",{staticClass:"sections anim-6",class:{"is-active":t.state.sections[1]},attrs:{"data-open":t.state.sections[1]}},[s("p",{staticClass:"label colour-fill-dark"},[t._v("\n\t\t\t\tWords and Phrases\n\n\t\t\t\t"),t.state.complete?t._e():s("span",{staticClass:"label colour-fill-dark"},[t._v(" "+t._s(t.line_count)+" ")])]),t._l(t.form.lines,function(e,i){return s("c-field-input",{key:e.id,ref:"line_"+i,refInFor:!0,attrs:{placeholder:t.attrs.line.placeholder},on:{change:function(e){return t.validate_line(i)}},model:{value:t.form.lines[i].value,callback:function(e){t.$set(t.form.lines[i],"value",e)},expression:"form.lines[index].value"}},[t.form.lines[i].state.add?s("button",{staticClass:"button shadow fade-in colour-bg-dark border-round",staticStyle:{"min-width":"unset"},attrs:{slot:"post"},on:{click:function(e){return t.add_line(i)}},slot:"post"},[s("p",{staticClass:"label colour-fill-pop"},[t._v("Add")])]):t._e(),t.form.lines[i].state.remove?s("button",{staticClass:"button shadow fade-in colour-bg-dark border-round",staticStyle:{"min-width":"unset"},attrs:{slot:"post"},on:{click:function(e){return t.remove_line(i)}},slot:"post"},[s("p",{staticClass:"label colour-fill-pop"},[t._v("X")])]):t._e()])})],2),s("c-message",{ref:"msgObj"}),s("div",{staticClass:"sections anim-6",class:{"is-active":t.sections_end},attrs:{"data-open":t.sections_end}},[s("div",{staticClass:"br-smaall"}),s("c-button",{ref:"btnSubmit",staticClass:"button-action",attrs:{onClick:t.submit}},[t._v("\n\t\t\t\t\tSubmit\n\t\t\t")])],1)],1)],1)},n=[],a=(s("7f7f"),s("b99b")),o=s("4240"),r=s("e82d"),l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"field-result"},[s("div",{staticClass:"field"},[t._t("pre"),s("input",{ref:"input",staticClass:"input text colour-fill-dark",attrs:{type:"string",placeholder:t.placeholder},domProps:{value:t.value},on:{input:t.input,change:t.change}}),t._t("post"),s("c-field-result")],2)])},c=[],u=s("5c50"),m={name:"cFieldName",props:{value:String,placeholder:String},methods:{input:function(){this.$emit("input",this.$refs.input.value)},change:function(){this.$emit("change",this.$refs.input.value)}},components:{"c-field-result":u["a"]}},h=m,f=s("2877"),d=Object(f["a"])(h,l,c,!1,null,null,null),p=d.exports,v=s("a42b"),b=s("f979");function _(t){for(var e="",s=0;s<t;s++)e+=i();function i(){return Math.random()<.5?n():a()}function n(){var t=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],e=Math.random(),s=t[Math.floor(25*e)+1];return void 0===s&&console.log("problem with randomID letter: "+e),s}function a(){var t=Math.random(),e=Math.floor(9*t)+1;return void 0===e&&console.log("problem with randomID number: "+t),e}return e}var g={id:_},$={name:"BoardCreate",mixins:[v["a"]],data:function(){return{form:{name:"",lines:[]},attrs:{name:{min:5,max:30,placeholder:"Choose a name .."},line:{min:5,max:80,placeholder:"Choose a word or phrase .."},lines:{min:8,max:50},server:{max_timeouts:5,timing:1500},action:Object},state:{init:!1,timeouts:0,sections:[!1,!1,!1],lines:0}}},computed:{line_count:function(){return"("+this.state.lines+"/"+this.attrs.lines.min+")"},sections_end:function(){for(var t=!0,e=0;e<this.state.sections.length;e++)this.state.sections[e]||(t=!1);return t}},methods:{init:function(t){if(!this.state.init){var e={url:"/api/board/create",method:"POST",JSON:!0,body:{name:"",lines:""}};this.attrs.action=e,this.state.init=!0}this.create_line(),this.section_display(0,!0);var s=this;setTimeout(function(){s.$root.$emit("page-title","CREATE")},500)},section_display:function(t,e){var s=this;setTimeout(function(){s.$set(s.state.sections,t,e)},1e3)},validate_name:function(){var t=b["a"].length(this.$refs.field_name,this.form.name,this.$refs.msgObj,this.attrs.name.min,this.attrs.name.max);return null!==t&&t?this.section_display(1,!0):this.section_display(1,!1),t},validate_line:function(t){var e="line_"+t,s=b["a"].length(this.$refs[e][0],this.form.lines[t].value,this.$refs.msgObj,this.attrs.line.min,this.attrs.line.max);return null!==s&&s||(this.form.lines[t].state.ready=!1),s&&(this.form.lines[t].state.ready=!0),this.check_line_count(),s},check_line_count:function(){this.state.lines=0;for(var t=0;t<this.form.lines.length;t++)this.form.lines[t].state.ready&&(this.state.lines+=1);this.state.lines>=this.attrs.lines.min?this.section_display(2,!0):this.section_display(2,!1)},create_line:function(){var t={id:g.id(3),value:"",state:{add:!0,remove:!1,ready:!1}};this.form.lines.push(t)},add_line:function(t){var e="line_"+t,s=this.validate_line(t);null!==s?(s&&(this.create_line(),this.form.lines[t].state.add=!1,this.form.lines[t].state.remove=!0,this.form.lines[t].state.ready=!0,b["a"].reset(this.$refs[e][0])),this.check_line_count()):b["a"].length(this.$refs[e][0],"x",this.$refs.msgObj,this.attrs.line.min,this.attrs.line.max)},remove_line:function(t){this.form.lines.splice(t,1),this.check_line_count()},submit:function(){this.attrs.action.body.name=this.form.name;for(var t="",e=0;e<this.form.lines.length;e++){var s=this.form.lines[e].value;t+=s+"ยง"}this.attrs.action.body.lines=t;var i=this;i.onSubmit(i.attrs.action,i,i.$refs.btnSubmit,i.$refs.msgObj,i.onSuccess,i.onError)},onSuccess:function(t){var e=this;e.$refs.btnSubmit.$emit("state","message","Enjoy!"),setTimeout(function(){e.$router.push("/board/"+t.data.url)},2300)},onError:function(t){if(this.state.timeouts<this.attrs.server.max_timeouts){if(this.$refs.btnSubmit.$emit("state","message","Error!"),408!==t.status)return;var e=this;setTimeout(function(){e.state.timeouts+=1,e.onSubmit(e.attrs.action,e,e.$refs.btnSubmit,e.$refs.msgObj,e.onSuccess,e.onError)},e.attrs.server.timing)}}},mounted:function(){this.init()},components:{"c-button":a["a"],"c-panel":o["a"],"c-message":r["a"],"c-field-input":p}},y=$,C=(s("4a20"),Object(f["a"])(y,i,n,!1,null,null,null));e["default"]=C.exports},c220:function(t,e,s){}}]);
//# sourceMappingURL=chunk-262748c7.93271da8.js.map