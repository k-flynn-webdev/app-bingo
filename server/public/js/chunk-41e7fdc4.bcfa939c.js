(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-41e7fdc4"],{"2aab":function(t,e,s){"use strict";var a=s("a176"),i=s.n(a);i.a},"4ab9":function(t,e,s){"use strict";s.d(e,"a",function(){return a});var a={methods:{expired_token_check:function(t){if(401===t.status&&"jwt expired"===t.message){var e=this;return setTimeout(function(){e.$router.push("/login")},2e3),!0}return!1}}}},5681:function(t,e,s){"use strict";var a=s("a5f9"),i=s.n(a);i.a},"77be":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex-only-on-large"},[t.isDeleting?s("c-popup",{attrs:{onClick:t.hide_delete}},[s("div",{attrs:{slot:"header"},slot:"header"},[t._v("\n\t\t\tDelete Account\n\t\t")]),s("p",{staticClass:"text"},[t._v(" Are you sure you want to delete ")]),s("p",{staticClass:"text"},[t._v(" this account? ")]),s("br"),s("div",{staticClass:"flex-row flex-row-between"},[s("c-button",{attrs:{onClick:t.hide_delete,type:"button"}},[t._v("\n\t\t\t\tClose\n\t\t\t")]),s("c-button",{staticClass:"colour-negative-bg",attrs:{type:"button",onClick:t.onSubmit_delete}},[t._v("\n\t\t\t\tDelete\n\t\t\t")])],1),s("c-message",{ref:"messageBtnDel"})],1):t._e(),s("c-panel",[s("div",{attrs:{slot:"header"},slot:"header"},[t._v("\n\t\t\tAccount\n\t\t")]),s("form",{staticClass:"form",attrs:{action:"/api/account/?_method=PUT",method:"POST"},on:{submit:function(e){return e.preventDefault(),t.onSubmit_update(e)}}},[t.isEditing?s("c-account-input",{attrs:{Input:t.account}}):s("c-account-text",{attrs:{Input:t.account}}),s("div",{staticClass:"flex-row flex-row-between",class:{"is-edit":!t.isEditing}},[s("c-button",{staticClass:"colour-yellow",attrs:{onClick:t.edit_switch,type:"button"}},[t._v("\n\t\t\t\t\t"+t._s(t.button_undo_label)+"\n\t\t\t\t")]),s("c-button",{directives:[{name:"show",rawName:"v-show",value:t.isEditing,expression:"isEditing"}],staticClass:"colour-positive-bg",attrs:{type:"submit",progress:t.progress_update}},[t._v("\n\t\t\t\t\tUpdate \n\t\t\t\t")]),s("c-button",{directives:[{name:"show",rawName:"v-show",value:t.isEditing,expression:"isEditing"}],staticClass:"colour-negative-bg",attrs:{type:"button",onClick:t.popup_delete,progress:t.progress_delete}},[t._v("\n\t\t\t\t\tDelete\n\t\t\t\t")])],1),s("c-message",{ref:"messageBtn"})],1)])],1)},i=[],n=(s("7f7f"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"account-input"},[t.NameShow?s("div",{ref:"field_name",staticClass:"field field-result"},[s("p",{staticClass:"text label colour-fill-bg-inv"},[t._v("\n\t\t\t\tName:\n\t\t")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.input.name.value,expression:"input.name.value"}],staticClass:"text colour-fill-bg-inv text-input",attrs:{type:"string",name:"name",pattern:t.name_pattern,title:t.name_title,placeholder:"Name",required:t.input.name.isRequired},domProps:{value:t.input.name.value},on:{change:t.validate_name,input:function(e){e.target.composing||t.$set(t.input.name,"value",e.target.value)}}}),s("c-field-result")],1):t._e(),t.EmailShow?s("div",{ref:"field_email",staticClass:"field field-result"},[s("p",{staticClass:"text label colour-fill-bg-inv"},[t._v("\n\t\t\t\tEmail:\n\t\t")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.input.email.value,expression:"input.email.value"}],staticClass:"text colour-fill-bg-inv text-input",attrs:{type:"email",name:"email",placeholder:"Email",required:t.input.email.isRequired},domProps:{value:t.input.email.value},on:{change:t.validate_email,input:function(e){e.target.composing||t.$set(t.input.email,"value",e.target.value)}}}),s("c-field-result")],1):t._e(),t.PasswordShow?s("div",{ref:"field_password",staticClass:"field field-result"},[s("p",{staticClass:"text label colour-fill-bg-inv"},[t._v("\n\t\t\t\tPassword:\n\t\t")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.input.password.value,expression:"input.password.value"}],staticClass:"text colour-fill-bg-inv text-input",attrs:{type:"password",name:"password",placeholder:"Password",pattern:t.password_pattern,title:t.password_title,required:t.input.password.isRequired},domProps:{value:t.input.password.value},on:{change:t.validate_password,input:function(e){e.target.composing||t.$set(t.input.password,"value",e.target.value)}}}),s("c-field-result")],1):t._e()])}),r=[],o=s("f979"),u=s("5c50"),l={name:"AccountInput",data:function(){return{attrs:{max:30,name:3,password:7}}},props:{input:{name:Object,email:Object,password:Object,validate:Boolean}},computed:{NameShow:function(){return!(void 0===this.input.name||!this.input.name.show)},EmailShow:function(){return!(void 0===this.input.email||!this.input.email.show)},PasswordShow:function(){return!(void 0===this.input.password||!this.input.password.show)},name_pattern:function(){var t=".{"+this.attrs.name+","+this.attrs.max+"}";return t},name_title:function(){var t="name must be between "+this.attrs.password+" and "+this.attrs.max+" characters long.";return t},password_pattern:function(){var t=".{"+this.attrs.password+",}";return t},password_title:function(){var t="password must be atleast "+this.attrs.password+" characters long.";return t}},methods:{init:function(){},validate_name:function(){if(this.input.validate){var t=this.input.name.value,e=this.$refs.field_name,s=o["a"].length(t,this.attrs.name,this.attrs.max);this.validate_result(s,e)}},validate_email:function(){if(this.input.validate){var t=this.input.email.value,e=this.$refs.field_email,s=o["a"].email(t);this.validate_result(s,e)}},validate_password:function(){if(this.input.validate){var t=this.input.password.value,e=this.$refs.field_password,s=o["a"].length(t,this.attrs.password,100);this.validate_result(s,e)}},validate_result:function(t,e){null!==t?t?t&&this.set_element_pass(e):this.set_element_fail(e):this.set_element_default(e)},set_element_default:function(t){return t.className="field field-result"},set_element_pass:function(t){return t.className="field field-result pass"},set_element_fail:function(t){return t.className="field field-result fail"}},mounted:function(){this.init()},components:{"c-field-result":u["a"]}},c=l,d=(s("2aab"),s("2877")),p=Object(d["a"])(c,n,r,!1,null,null,null),m=p.exports,f=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"account-text"},[t.NameShow?s("div",{staticClass:"field"},[s("p",{staticClass:"text label"},[t._v("Name:")]),s("p",{staticClass:"text account-text-item"},[t._v("\n\t\t\t"+t._s(t.Input.Name.value)+"\n\t\t")])]):t._e(),t.EmailShow?s("div",{staticClass:"field"},[s("p",{staticClass:"text label"},[t._v("Email:")]),s("p",{staticClass:"text account-text-item"},[t._v("\n\t\t\t"+t._s(t.Input.Email.value)+"\n\t\t")])]):t._e(),t.PasswordShow?s("div",{staticClass:"field"},[s("p",{staticClass:"text label"},[t._v("Password:")]),s("p",{staticClass:"text account-text-item"},[t._v("\n\t\t\t"+t._s(t.getPassword)+"\n\t\t")])]):t._e()])},v=[],_={name:"AccountText",props:{Input:{Name:Object,Email:Object,Password:Object}},computed:{NameShow:function(){return!(void 0===this.Input.Name||!this.Input.Name.show)},EmailShow:function(){return!(void 0===this.Input.Email||!this.Input.Email.show)},PasswordShow:function(){return!(void 0===this.Input.Password||!this.Input.Password.show)},getPassword:function(){return"hidden"}}},h=_,g=(s("5681"),Object(d["a"])(h,f,v,!1,null,"d1c0f190",null)),w=g.exports,b=s("b99b"),x=s("4240"),C=s("f070"),E=s("e82d"),$=s("4ab9"),N={name:"Account",mixins:[$["a"]],data:function(){return{isEditing:!1,isDeleting:!1,progress_update:{waiting:!1,success:!1,error:!1},progress_delete:{waiting:!1,success:!1,error:!1},account:{Name:{show:!0,isRequired:!0,value:""},Email:{show:!0,isRequired:!0,value:""},Password:{show:!0,isRequired:!0,value:""}}}},computed:{button_undo_label:function(){return this.isEditing?"undo":"edit"}},created:function(){},mounted:function(){this.get_user()},methods:{popup_delete:function(){this.isDeleting=!0},hide_delete:function(){this.isDeleting=!1},get_user:function(){var t=this.$store.getters["user/get_user"];this.account.Name.value=t.name,this.account.Email.value=t.email},edit_switch:function(){this.isEditing=!this.isEditing},button_reset_update:function(){var t=this;setTimeout(function(){t.progress_update.waiting=!1,t.progress_update.success=!1,t.progress_update.error=!1},1e3)},button_reset_delete:function(){var t=this;setTimeout(function(){t.progress_delete.waiting=!1,t.progress_delete.success=!1,t.progress_delete.error=!1},1e3)},onSubmit_update:function(t){var e=this;this.progress_update.waiting=!0,this.$request.request_url_form(t,function(t,s){if(e.button_reset_update(),t)return e.expired_token_check(t),e.progress_update.error=!0,void e.$refs.messageBtn.$emit("message",{class:"error text-negative",message:t.message});e.progress_update.success=!0,e.$refs.messageBtn.$emit("message",{class:"success text-positive",message:s.message}),setTimeout(function(){e.$store.dispatch("user/login_success",s.token),e.$router.push("/")},1e3)})},onSubmit_delete:function(t){var e=this,s={url:"/api/account/?_method=DELETE",method:"POST",body:""};this.progress_delete.waiting=!0,this.$request.request_url(s,function(t,s){if(t)return e.expired_token_check(t)&&setTimeout(function(){e.hide_delete()},1400),e.progress_delete.error=!0,void e.$refs.messageBtnDel.$emit("message",{class:"error text-negative",message:t.message});e.progress_delete.success=!0,e.$refs.messageBtnDel.$emit("message",{class:"success text-positive",message:s.message}),e.button_reset_delete(),setTimeout(function(){e.hide_delete()},1400),setTimeout(function(){e.$store.dispatch("user/logout_success"),e.$router.push("/")},1900)})}},components:{"c-button":b["a"],"c-panel":x["a"],"c-popup":C["a"],"c-account-input":m,"c-account-text":w,"c-message":E["a"]}},P=N,S=Object(d["a"])(P,a,i,!1,null,null,null);e["default"]=S.exports},a176:function(t,e,s){},a5f9:function(t,e,s){}}]);
//# sourceMappingURL=chunk-41e7fdc4.bcfa939c.js.map